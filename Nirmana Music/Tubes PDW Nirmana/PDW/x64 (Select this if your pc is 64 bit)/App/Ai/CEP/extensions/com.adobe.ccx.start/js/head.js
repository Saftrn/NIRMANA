/**
 * ADOBE CONFIDENTIAL
 *  _________________
 *  Copyright 2016 Adobe Systems Incorporated
 *  All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and are protected by all applicable intellectual property
 * laws, including trade secret and copyright laws.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 */
function HostEvents(){riotctrl.on("recentfile",function(e,t){if(!this.isInCooldown()){this.setCooldown();var i=iaw.store.get(["host","tabs","recentfile"]),a=iaw.store.get(["host","hostID"]);if(window.__adobe_cep__){var n=i.list[e],s=n.identifier;switch(iaw.analytics.ingest.logItemOpenedEvent({openType:"recent",fileType:n.kind,itemPosition:e,sectionView:t||""}),a){case"PHXS":var o=iaw.util.getPipMethodString("recent",t);window.__adobe_cep__.evalScript("CCXWelcomeXSHost_"+a+'.openDocumentWithMRUIdentifier("'+s+'","'+o+'")',iaw.util.closeExtOnStatus);break;default:iaw.cepUtil.sendEvent(iaw.cepUtil.events.kOpenRecentFile,s)}}}},this),riotctrl.on("recentlib",function(e){if(window.__adobe_cep__){if(this.isInCooldown())return;this.setCooldown(),iaw.analytics.ingest.logItemOpenedEvent({openType:"library",itemPosition:e,sectionView:"list"}),iaw.util.showLibraryInPanel(e)}},this),riotctrl.on("ccfiles",function(e,t){if(!this.isInCooldown()){this.setCooldown();var i=iaw.store.get(["host","tabs","ccfiles"]),a=iaw.store.get(["host","hostID"]);if(window.__adobe_cep__){var n=i.list[e],s=n.identifier,o=JSON.stringify({path:[s]});"win"!==iaw.store.get(["host","platform"])&&"windows"!==iaw.store.get(["host","platform"])||"PPRO"!==iaw.store.get(["host","hostID"])||(o='{"path":["'+s+'"]}');var r=n.kind||n.identifier.split(".").pop();if(iaw.analytics.ingest.logItemOpenedEvent({openType:"cc-file",eventAction:"click",fileType:r,itemPosition:e,sectionView:t||"",cardID:n.id}),iaw.log.console("CC-Files :: --------- opening "+s),"PHXS"!==iaw.store.get(["host","hostID"]))iaw.cepUtil.sendEvent(iaw.cepUtil.events.kOpenDropFiles,o);else{var c=iaw.util.getPipMethodString("ccfiles",t);window.__adobe_cep__.evalScript("CCXWelcomeXSHost_"+a+'.openDocumentWithPath("'+s+'","'+c+'")',iaw.util.closeExtOnStatus)}}}}.bind(this)),riotctrl.on("presetfile",function(e,t){if(!this.isInCooldown()){this.setCooldown();var i=iaw.store.get(["host","tabs","presetfile"]),a=e>=0?i.list[e].identifier:null;iaw.analytics.ingest.logItemOpenedEvent({openType:"new",fileType:"preset",itemPosition:e,sectionView:t||""}),this.createDocumentFromTemplate(a)}},this),riotctrl.on("templatefile",function(e,t){if(!this.isInCooldown()){this.setCooldown();var i=iaw.store.get(["host","tabs","templatefile"]),a=e>=0?i.list[e].identifier:null;iaw.analytics.ingest.logItemOpenedEvent({openType:"new",fileType:"template",itemPosition:e,sectionView:t||""}),this.createDocumentFromTemplate(a)}},this),riotctrl.on("samplefile",function(e,t){if(!this.isInCooldown()&&(this.setCooldown(),iaw.analytics.ingest.logItemOpenedEvent({openType:"new",fileType:"sample",itemPosition:e,sectionView:t||""}),window.__adobe_cep__)){var i=iaw.store.get(["host","tabs","samplefile"]),a=e>=0?i.list[e].identifier:null;alert("unimplemented method: samplefile["+e+"]("+a+")")}},this),riotctrl.on("custom",function(e,t){if(!this.isInCooldown()&&(this.setCooldown(),window.__adobe_cep__)){var i=iaw.store.get(["host","tabs","custom"]);i&&e>=0&&(iaw.analytics.ingest.logItemOpenedEvent({openType:"custom",fileType:i.list[e].identifier,itemPosition:e,sectionView:t||""}),iaw.cepUtil.sendEvent(iaw.cepUtil.events.kExecuteMenuCmd,i.list[e].identifier))}},this),riotctrl.on("startertemplate",function(e,t){if(!this.isInCooldown()){this.setCooldown();var i=iaw.store.get(["host","tabs","startertemplate"]),a=e>=0?i.list[e].identifier:null;iaw.analytics.ingest.logItemOpenedEvent({openType:"new",fileType:"startertemplate",itemPosition:e,sectionView:t||""}),this.createDocumentFromTemplate(a)}},this),riotctrl.on("createButtonNewdocs",function(){if(!this.isInCooldown()){this.setCooldown(),riotctrl.trigger("pause-all-media");var e=iaw.store.get(["host","hostID"]);if(window.__adobe_cep__)switch(e){case"PHXS":iaw.cepUtil.sendEvent(iaw.cepUtil.events.LOADEXTENSION,"com.adobe.ccx.fnft"),window.__adobe_cep__.evalScript("CCXWelcomeXSHost_PHXS.createDocumentFromTemplate()",iaw.util.closeExtOnStatus);break;case"ILST":iaw.store.get(["host","fnftEnabled"])?(iaw.analytics.pip.logEvent("fnftCategory","performance","fnftStart"),iaw.cepUtil.sendEvent(iaw.cepUtil.events.LOADEXTENSION,"com.adobe.ccx.fnft"),iaw.cepUtil.csInterface.requestOpenExtension("com.adobe.ccx.fnft","")):iaw.cepUtil.sendEvent(iaw.cepUtil.events.kExecuteMenuCmd,"new_default");break;case"AEFT":window.__adobe_cep__.evalScript("CCXWelcomeXSHost_AEFT.createDefaultDocument()",iaw.util.closeExtOnStatus);break;default:iaw.cepUtil.sendEvent(iaw.cepUtil.events.kExecuteMenuCmd,"new_default")}}},this),riotctrl.on("createButtonOpen",function(){if(!this.isInCooldown()){this.setCooldown(),riotctrl.trigger("pause-all-media");var e=iaw.store.get(["host","hostID"]);if(iaw.analytics.ingest.logItemOpenedEvent({openType:"open",fileType:"dialog"}),window.__adobe_cep__)switch(e){case"PHXS":var t=iaw.util.getPipMethodString("open.dialog");window.__adobe_cep__.evalScript("CCXWelcomeXSHost_"+e+'.openDocumentWithUI("'+t+'")',iaw.util.closeExtOnStatus);break;case"AEFT":window.__adobe_cep__.evalScript("CCXWelcomeXSHost_"+e+".openDocumentWithUI()",iaw.util.closeExtOnStatus);break;default:iaw.cepUtil.sendEvent(iaw.cepUtil.events.kExecuteMenuCmd,"open")}}},this),riotctrl.on("createButtonNewProduction",function(){this.isInCooldown()||(this.setCooldown(),riotctrl.trigger("pause-all-media"),iaw.analytics.ingest.logItemOpenedEvent({openType:"new",fileType:"TeamProject",eventAction:"click"}),window.__adobe_cep__&&iaw.cepUtil.sendEvent(iaw.cepUtil.events.kExecuteMenuCmd,"new_production"))},this),riotctrl.on("createButtonOpenProduction",function(){this.isInCooldown()||(this.setCooldown(),riotctrl.trigger("pause-all-media"),iaw.analytics.ingest.logItemOpenedEvent({openType:"open",fileType:"TeamProject",eventAction:"click"}),window.__adobe_cep__&&iaw.cepUtil.sendEvent(iaw.cepUtil.events.kExecuteMenuCmd,"open_production"))},this),riotctrl.on("lock-screen",function(e){e=e||!1;var t=document.getElementById("screen-cover");e&&t.classList.add("opaque"),t.style.display="block"},this),riotctrl.on("unlock-screen",function(){var e=document.getElementById("screen-cover");e.classList.contains("opaque")?(e.addEventListener("webkitAnimationEnd",function t(i){e.removeEventListener("webkitAnimationEnd",t),e.style.display="none",e.style.opacity=0,e.className=""}),e.classList.add("anim--fade-out")):(e.style.display="none",e.style.opacity=0,e.className="")},this)}window.riotctrl={events:{},burnt:{},RETROACTIVE:"-retro",on:function(e,t,i){return(this.events[e]||(this.events[e]=[])).push({fn:t,ctx:i}),this.burnt[e]&&e.indexOf(this.RETROACTIVE)!==-1&&t.apply(i,this.burnt[e]),this},once:function(e,t,i){var a=this,n=function(){a.off(e,n),t.apply(i,arguments)};return this.on(e,n,i)},trigger:function(e){var t=[].slice.call(arguments,1),i=(this.events[e]||[]).slice(),a=0,n=null;for(a;n=i[a];a++)n.fn.apply(n.ctx,t);return e.indexOf(this.RETROACTIVE)!==-1&&(this.burnt[e]=t),this},off:function(e,t){var i=this.events[e],a=[];if(i&&t)for(var n=0,s=i.length;n<s;n++)i[n].fn!==t&&a.push(i[n]);return a.length?this.events[e]=a:delete this.events[e],this}};var iaw=iaw||{};iaw.startup={PHASES:{Doc:"whenDocReady",Host:"whenHostReady",Done:"whenReady"},_objs:[],add:function(e){var t=!1;for(var i in this.PHASES)if(e[this.PHASES[i]]){t=!0;break}if(!t)throw new Error("[iaw.init] Add at least one init callback before adding to startup sequence.");this._objs.push(e)},remove:function(e){var t=this._objs.indexOf(e);t!==-1&&(this._objs.splice(t,1),console.log(this._objs))},run:function(e){var t,i;for(t=0;t<this._objs.length;t++)i=this._objs[t],i[e]&&i[e].call(i)}};var iaw=iaw||{};iaw.a11y=function(){function e(t){if(t===document.documentElement)return!1;if(t.focusableCacheIndex)return d[t.focusableCacheIndex];var i=!1,a=window.getComputedStyle(t);return"hidden"===a.visibility||"none"===a.display?i=!0:t.parentNode&&(i=e(t.parentNode)),t.focusableCacheIndex=u,d[t.focusableCacheIndex]=i,u++,i}function t(){function e(){var e="body:not([modality=keyboard]) :focus { outline: none; }",t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.id="disable-focus-ring",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i)}function t(e){return e.matches(a)}console.log();var i=!1,a=["input:not([type])","input[type=text]","input[type=checkbox]","input[type=radio]","input[type=number]","input[type=date]","input[type=time]","input[type=datetime]","textarea","[role=textbox]","select","[supports-modality=keyboard]"].join(",");e(),document.body.addEventListener("keydown",function(e){i=!0,setTimeout(function(){i=!1},0)},!0),document.body.addEventListener("focus",function(e){(i||t(e.target))&&document.body.setAttribute("modality","keyboard")},!0),document.body.addEventListener("blur",function(e){document.body.removeAttribute("modality")},!0)}var i,a=[{keyCode:36},{keyCode:48},{keyCode:48,shiftKey:!0},{keyCode:49},{keyCode:53},{keyCode:115},{keyCode:116},{keyCode:119},{keyCode:121},{keyCode:123},{keyCode:124},{keyCode:125},{keyCode:126},{keyCode:0},{keyCode:11},{keyCode:8},{keyCode:2},{keyCode:14},{keyCode:3},{keyCode:5},{keyCode:4},{keyCode:34},{keyCode:38},{keyCode:40},{keyCode:37},{keyCode:46},{keyCode:45},{keyCode:31},{keyCode:35},{keyCode:12},{keyCode:15},{keyCode:1},{keyCode:17},{keyCode:32},{keyCode:9},{keyCode:13},{keyCode:7},{keyCode:16},{keyCode:6},{keyCode:50},{keyCode:18},{keyCode:19},{keyCode:20},{keyCode:21},{keyCode:23},{keyCode:22},{keyCode:26},{keyCode:28},{keyCode:25},{keyCode:29},{keyCode:27},{keyCode:24},{keyCode:33},{keyCode:30},{keyCode:42},{keyCode:41},{keyCode:39},{keyCode:43},{keyCode:47},{keyCode:44},{keyCode:0,shiftKey:!0},{keyCode:11,shiftKey:!0},{keyCode:8,shiftKey:!0},{keyCode:2,shiftKey:!0},{keyCode:14,shiftKey:!0},{keyCode:3,shiftKey:!0},{keyCode:5,shiftKey:!0},{keyCode:4,shiftKey:!0},{keyCode:34,shiftKey:!0},{keyCode:38,shiftKey:!0},{keyCode:40,shiftKey:!0},{keyCode:37,shiftKey:!0},{keyCode:46,shiftKey:!0},{keyCode:45,shiftKey:!0},{keyCode:31,shiftKey:!0},{keyCode:35,shiftKey:!0},{keyCode:12,shiftKey:!0},{keyCode:15,shiftKey:!0},{keyCode:1,shiftKey:!0},{keyCode:17,shiftKey:!0},{keyCode:32,shiftKey:!0},{keyCode:9,shiftKey:!0},{keyCode:13,shiftKey:!0},{keyCode:7,shiftKey:!0},{keyCode:16,shiftKey:!0},{keyCode:6,shiftKey:!0},{keyCode:50,shiftKey:!0},{keyCode:18,shiftKey:!0},{keyCode:19,shiftKey:!0},{keyCode:20,shiftKey:!0},{keyCode:21,shiftKey:!0},{keyCode:23,shiftKey:!0},{keyCode:22,shiftKey:!0},{keyCode:26,shiftKey:!0},{keyCode:28,shiftKey:!0},{keyCode:25,shiftKey:!0},{keyCode:29,shiftKey:!0},{keyCode:27,shiftKey:!0},{keyCode:24,shiftKey:!0},{keyCode:33,shiftKey:!0},{keyCode:30,shiftKey:!0},{keyCode:42,shiftKey:!0},{keyCode:41,shiftKey:!0},{keyCode:39,shiftKey:!0},{keyCode:43,shiftKey:!0},{keyCode:47,shiftKey:!0},{keyCode:44,shiftKey:!0},{keyCode:75},{keyCode:67},{keyCode:78},{keyCode:69},{keyCode:51}],n=[{keyCode:13},{keyCode:9},{keyCode:9,shiftKey:!0},{keyCode:32},{keyCode:27},{keyCode:36},{keyCode:33},{keyCode:35},{keyCode:34},{keyCode:37},{keyCode:39},{keyCode:40},{keyCode:38},{keyCode:65},{keyCode:66},{keyCode:67},{keyCode:68},{keyCode:69},{keyCode:70},{keyCode:71},{keyCode:72},{keyCode:73},{keyCode:74},{keyCode:75},{keyCode:76},{keyCode:77},{keyCode:78},{keyCode:79},{keyCode:80},{keyCode:81},{keyCode:82},{keyCode:83},{keyCode:84},{keyCode:85},{keyCode:86},{keyCode:87},{keyCode:88},{keyCode:89},{keyCode:90},{keyCode:192},{keyCode:49},{keyCode:50},{keyCode:51},{keyCode:52},{keyCode:53},{keyCode:54},{keyCode:55},{keyCode:56},{keyCode:57},{keyCode:48},{keyCode:189},{keyCode:187},{keyCode:219},{keyCode:221},{keyCode:220},{keyCode:186},{keyCode:222},{keyCode:188},{keyCode:190},{keyCode:191},{keyCode:65,shiftKey:!0},{keyCode:66,shiftKey:!0},{keyCode:67,shiftKey:!0},{keyCode:68,shiftKey:!0},{keyCode:69,shiftKey:!0},{keyCode:70,shiftKey:!0},{keyCode:71,shiftKey:!0},{keyCode:72,shiftKey:!0},{keyCode:73,shiftKey:!0},{keyCode:74,shiftKey:!0},{keyCode:75,shiftKey:!0},{keyCode:76,shiftKey:!0},{keyCode:77,shiftKey:!0},{keyCode:78,shiftKey:!0},{keyCode:79,shiftKey:!0},{keyCode:80,shiftKey:!0},{keyCode:81,shiftKey:!0},{keyCode:82,shiftKey:!0},{keyCode:83,shiftKey:!0},{keyCode:84,shiftKey:!0},{keyCode:85,shiftKey:!0},{keyCode:86,shiftKey:!0},{keyCode:87,shiftKey:!0},{keyCode:88,shiftKey:!0},{keyCode:89,shiftKey:!0},{keyCode:90,shiftKey:!0},{keyCode:192,shiftKey:!0},{keyCode:49,shiftKey:!0},{keyCode:50,shiftKey:!0},{keyCode:51,shiftKey:!0},{keyCode:52,shiftKey:!0},{keyCode:53,shiftKey:!0},{keyCode:54,shiftKey:!0},{keyCode:55,shiftKey:!0},{keyCode:56,shiftKey:!0},{keyCode:57,shiftKey:!0},{keyCode:48,shiftKey:!0},{keyCode:189,shiftKey:!0},{keyCode:187,shiftKey:!0},{keyCode:219,shiftKey:!0},{keyCode:221,shiftKey:!0},{keyCode:220,shiftKey:!0},{keyCode:186,shiftKey:!0},{keyCode:222,shiftKey:!0},{keyCode:188,shiftKey:!0},{keyCode:190,shiftKey:!0},{keyCode:191,shiftKey:!0},{keyCode:111},{keyCode:106},{keyCode:109},{keyCode:107},{keyCode:8}],s=['input:not([type="hidden"]):not(:disabled)'," select:not(:disabled)","a[href]","textarea:not(:disabled)","button:not(:disabled)","[tabindex]"].join(","),o="",r=800,c=/\s+/g,l=/[\-\[\]{}()*+?.,\\\^$|#\s]/g,d={},u=1;return iaw.startup.add({whenDocReady:t.bind(this)}),{Keys:{TAB:9,ENTER:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40},registerKeyEventsInterest:function(){var e=iaw.util.isWindowsOS()?n:a;iaw.cepUtil.csInterface&&iaw.cepUtil.csInterface.registerKeyEventsInterest(JSON.stringify(e))},isFocusable:function(t){return t.matches(s)&&!e(t)},focusable:function(t,i,a){"string"==typeof t&&(t=document.querySelector(t));var n,o,r=[],c=[],l=t.querySelectorAll(s),d=Array.prototype.slice.call(l);a&&d.unshift(t);for(var u=0,p=d.length;u<p;u++)n=d[u],o=n.tabIndex,o<0&&i||e(n)||(o<=0?r.push(n):c.push({tabIndex:o,node:n}));return c=c.sort(function(e,t){return e.tabIndex-t.tabIndex}).map(function(e){return e.node}),Array.prototype.push.apply(c,r),c},tabbable:function(e,t){return"string"==typeof e&&(e=document.querySelector(e)),iaw.a11y.focusable(e,!0,t)},descendantHasFocus:function(e){return"string"==typeof e&&(e=document.querySelector(e)),e===document.activeElement||e.contains(document.activeElement)},alphanumericSearch:function(e,t,a){var n,s=e.charCode,d=-1;if(!(s<=32||e.ctrlKey||e.metaKey||e.altKey))return n=String.fromCharCode(s),n!==o&&(o+=String.fromCharCode(s)),clearTimeout(i),i=setTimeout(function(){o=""},r),t=t.filter(function(e){var t=e.textContent.replace(c," ").trim();return new RegExp("^"+o.replace(l,"\\$&"),"i").test(t)}),t.length?(d=t.indexOf(a),d===-1?t[0]:o.length>1?t:d===t.length-1?t[0]:t[d+1]):void 0},getAdjacentElementVertically:function(e,t,i){var a,n=i?-1:1,s=e.indexOf(t),o=t.getBoundingClientRect(),r=o.top,c=o.left,l=o.right,d=e[s+n],u=null,p=[];for(s+=n;d;){if(o=d.getBoundingClientRect(),null===u&&r!==o.top&&(u=o.top),u){if(u!==o.top)break;p.push({item:d,rect:o})}s+=n,d=e[s]}return p=p.sort(function(e,t){return e.rect.left>t.rect.left}),a=p.filter(function(e){return o=e.rect,c===o.left||l===o.right||c>o.left&&l<o.right}),a.length?a[0].item:p.length?p[p.length-1].item:void 0},TrapFocus:function(){function e(e,o){g&&i(),g=!0,d="string"==typeof e?document.querySelector(e):e,f=o||{},p=document.activeElement,r(),c(t()),document.addEventListener("focus",n,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",s,!0),l(d,!0)}function t(){var e;if(!f.initialFocus){if(e=u[0],!e)throw new Error("You can't have a focus-trap without at least one focusable element");return e}if(e="string"==typeof f.initialFocus?document.querySelector(f.initialFocus):f.initialFocus,!e)throw new Error("The `initialFocus` selector you passed refers to no known node");return e}function i(){g&&(g=!1,document.removeEventListener("focus",n,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",s,!0),l(d,!1),f.onDeactivate&&f.onDeactivate(),setTimeout(function(){!iaw.a11y.descendantHasFocus(d)&&document.activeElement&&document.body!==document.activeElement||c(p)},0))}function a(e){d.contains(e.target)||(e.preventDefault(),e.stopImmediatePropagation())}function n(e){r(),d.contains(e.target)||c(u[0])}function s(e){e.keyCode===iaw.a11y.Keys.TAB&&o(e),e.keyCode===iaw.a11y.Keys.ESC&&i()}function o(e){e.preventDefault(),r();var t=e.target,i=u.indexOf(t),a=u[u.length-1],n=u[0];return e.shiftKey?e.target===n?void c(a):void c(u[i-1]):t===a?void c(n):void c(u[i+1])}function r(){u=iaw.a11y.tabbable(d,!0)}function c(e){e&&e.focus&&(e!==t()||iaw.a11y.isFocusable(e)||(e.tabIndex=-1,e.addEventListener("blur",function i(){e.removeAttribute("tabIndex"),e.removeEventListener("blur",i)},!0)),e.focus(),"input"===e.tagName.toLowerCase()&&e.select())}function l(e,t){if(e)for(var i,a,n,s=e.parentNode;s!==document.documentElement;){i=Array.prototype.slice.call(s.children),Array.prototype.splice.call(i,i.indexOf(e),1);for(var o=0,r=i.length;o<r;o++)a=i[o],"AREA"!==a.tagName&&"BASE"!==a.tagName&&"BASEFONT"!==a.tagName&&"BR"!==a.tagName&&"COL"!==a.tagName&&"LINK"!==a.tagName&&"META"!==a.tagName&&"PARAM"!==a.tagName&&"SCRIPT"!==a.tagName&&"STYLE"!==a.tagName&&(t?(n=a.getAttribute("aria-hidden"),n&&a.setAttribute("data-aria-hidden",n),a.setAttribute("aria-hidden","true")):(n=a.getAttribute("data-aria-hidden"),n?(a.setAttribute("aria-hidden",n),a.removeAttribute("data-aria-hidden")):a.removeAttribute("aria-hidden")));e=s,s=s.parentNode}}var d,u,p,g,f;return{activate:e,deactivate:i}}()}}();var iaw=iaw||{};iaw.analytics={enabled:!1,pipQuery:{category:"Mobile Creations",pipAware:{subCategory:"See Start Screen",eventName:"See Start Screen"},pipTry:{subCategory:"Click Mobile Creations",eventName:"Click Mobile Creations"},pipSucceedProject:{subCategory:"Open Mobile Creations",eventName:"Open Mobile Creations"},pipSucceedProjectFile:{subCategory:"Open Mobile Creations",eventName:"Open App Page"},pipNoAssetUI:{subCategory:"No Mobile Creations",eventName:"See No Asset UI"},pipGetApp:{subCategory:"No Mobile Creations",eventName:"Click on Get App"},pipTimeOutOnMCClick:{subCategory:"TimeOutOnMCClick",eventName:"TimeOutOnMCClick"},pipTimeOutOnProjectClick:{subCategory:"TimeOutOnProjectClick",eventName:"TimeOutOnProjectClick"},pipTimeOutOnFileClick:{subCategory:"TimeOutOnFileClick",eventName:"TimeOutOnFileClick"},pipTryAgainOnMCClick:{subCategory:"TryAgainOnMCClick",eventName:"TryAgainOnMCClick"},pipTryAgainOnProjectClick:{subCategory:"TryAgainOnProjectClick",eventName:"TryAgainOnProjectClick"},pipTryAgainOnFileClick:{subCategory:"TryAgainOnFileClick",eventName:"TryAgainOnFileClick"}},config:function(e,t,i,a){this.enabled=t.userTrackingEnabled,this.ingest.configure(e,t,i,a)},composeURLWithAnalyticsQueryString:function(e){var t=e;if(t){var i=this.getAnalyticsQueryString(),a=t.indexOf("#"),n="";a>=0&&(n=t.substr(a),t=t.substr(0,a));var s=t.indexOf("?")<0?"?":"&";t+=s+i+n}return t},getAnalyticsQueryString:function(){var e=iaw.store.get("host");return"locale="+e.language+"&x-product="+e.hostID+"%2F"+e.appVersion+"&x-product-location=CCXStart-"+e.displayMode+"%2F"+e.radarVersion+"&x-radarSession="+e.radarSessionGUID+"&x-appSession="+e.sessionGUID+"&ute="+e.userTrackingEnabled},pip:{kCategory:"CCXStart",fnftCategory:"CCXFNFT",logEvent:function(e,t,i){if(iaw.analytics.enabled){i&&(i=i.length<128?i:i.substr(0,127));var a={dataType:"event",category:e,subcategory:t,eventname:i},n=JSON.stringify(a);iaw.cepUtil&&iaw.cepUtil.sendEvent(iaw.cepUtil.events.LOGPIP,n)}},logDataGroupEvent:function(e,t,i,a){if(iaw.analytics.enabled){var n=[];t&&Object.keys(t).forEach(function(e){n.push({columnname:e,value:t[e]})});var s={dataType:"group",category:i,subcategory:a,groupname:e,Group_Data_Array:n};s=JSON.stringify(s),iaw.cepUtil&&iaw.cepUtil.sendEvent(iaw.cepUtil.events.LOGPIP,s)}},logFNFTDataGroupEvent:function(e,t){"PHXS"===iaw.store.get(["host","hostID"])&&this.logDataGroupEvent(e,t,this.fnftCategory,"Interaction")},logInteractionEvent:function(e){this.logEvent(this.kCategory,"Interaction",e)},logFNFTInteractionEvent:function(e){"PHXS"===iaw.store.get(["host","hostID"])&&this.logEvent(this.fnftCategory,"Interaction",e)},logFailureEvent:function(e){this.logEvent(this.kCategory,"Failure",e)}},ingest:{imsToken:null,ingestLibReady:!1,psdkData:null,basePayloadData:{eventType:null,eventGUID:null,dts:null,userGUID:null,subscriptionStatus:null,productName:null,productVersion:null,productLanguage:null,displayCount:0,radarVersion:null,userAgent:navigator.userAgent,radarSessionGUID:null,appSessionGUID:null},renderedCards:{},prequeuedEvents:[],configure:function(e,t,i,a){function n(){return{ENVIRONMENT:a,ANALYTICS_ENABLED:iaw.analytics.enabled,ANALYTICS_API_KEY:e,ANALYTICS_X_PRODUCT:t.hostID+"%2F"+t.appVersion,ANALYTICS_PROJECT:"ccxservice",ANALYTICS_USER_REGION:t.countryCode,ANALYTICS_INGEST_TYPE:"dunamis",ANALYTICS_MAX_QUEUED_EVENTS:50,ANALYTICS_DEBOUNCE:0}}var s=this;a=a||"prod",this.psdkData=i;var o={getOptions:n,log:function(e){iaw.log.console(e)},getAccessToken:function(e){s.imsToken?e(null,s.imsToken):iaw.cepUtil.getIMSAccessToken(function(t){s.imsToken=t,e(null,t)})},clearAccessToken:function(){s.imsToken=null,iaw.cepUtil.clearAccessToken()}};if(Ingest.init(o),this.basePayloadData.userGUID=t.adobeGUID,this.basePayloadData.subscriptionStatus=t.accountStatus,this.basePayloadData.productName=t.hostID,this.basePayloadData.productVersion=t.appVersion,this.basePayloadData.productLanguage=t.language,this.basePayloadData.displayCount=t.displayCount,this.basePayloadData.radarVersion=t.radarVersion,this.basePayloadData.modeID=t.displayMode,this.basePayloadData.radarSessionGUID=t.radarSessionGUID,this.basePayloadData.appSessionGUID=t.sessionGUID,"fnft"!==t.displayMode&&(this.basePayloadData.appLaunchCount=t.launchCount),this.basePayloadData.AUMSegments=null,this.basePayloadData.hvaFlow=null,this.basePayloadData.displayMode=null,i){this.basePayloadData.AUMSegments=i.segmentID||"none",this.basePayloadData.hvaFlow=i.hvaFlow||"none";for(var r=0;r<i.cardControl.length&&!this.basePayloadData.displayMode;r++)i.cardControl[r].modeID===t.displayMode&&(this.basePayloadData.displayMode=i.cardControl[r].cardOrder.toString())}if("paid"!==t.accountStatus&&void 0!==t.secondsLeftInTrial){var c=window.moment().add(window.moment.duration(t.secondsLeftInTrial,"seconds"));this.basePayloadData.trialEndDts=c.format("YYYY-MM-DDTHH:mm:ss.SSSZZ")}iaw.log.console("Ingest configured ("+a+")"),this.ingestLibReady=!0,this.processPrequeuedEvents()},createPayload:function(e){var t=JSON.parse(JSON.stringify(this.basePayloadData));return t.eventGUID=iaw.util.generateGUID(),e||(delete t.AUMSegments,delete t.hvaFlow,delete t.displayMode),t},processPrequeuedEvents:function(){var e=this;this.prequeuedEvents.forEach(function(t){for(var i in e.basePayloadData)!t[i]&&e.basePayloadData[i]&&(t[i]=e.basePayloadData[i]);e.postEvent(t)})},postEvent:function(e){this.ingestLibReady?e.debugIt?window.alert(JSON.stringify(e)):Ingest.postEvent(e):this.prequeuedEvents.push(e)},flushEvent:function(){this.ingestLibReady&&Ingest.flush(!0)},logScreenStateEvent:function(e){var t=this.createPayload();t.eventType="screen-state",t.welcomeScreenState=e,this.postEvent(t)},logEngagementCardEvent:function(e,t){if("rendered"===e&&!this.renderedCards[t.cardID]||"rendered"!==e){var i=this.createPayload(!0);switch(e){case"rendered":i.eventType="eng-card-rendered",this.renderedCards[t.cardID]=!0;break;case"clicked":i.eventType="eng-card-click";break;default:iaw.log.conosle("Invalid Ingest card event")}i.cardTypeID=t.cardTypeID,i.cardTypeName=t.cardType,i.cardID=t.cardID,i.cardName=t.cardName,i.width=t.width,i.displayTemplate=t.displayTemplate||"",i.startDTS=t.startDTS||"",i.endDTS=t.endDTS||"",i.actionURL=t.actionURL||"",i.urlLinkType=t.urlLinkType||"",i.invertPresentation="undefined"!=typeof t.invertPresentation?t.invertPresentation:"n/a",t.campaignCode&&(i.campaignCode=t.campaignCode),t.recipe&&(i.recipe=t.recipe),t.aumSegments&&(i.aumSegments=t.aumSegments),t.priceCopy&&(i.priceCopy=t.priceCopy),t.promoID&&(i.promoID=t.promoID),t.as_query&&(i.actionURL=i.actionURL+"&"+t.as_query),this.psdkData&&(i.eventParams={persona:this.psdkData.persona||"none",skill:this.psdkData.skill||"none",appLaunchBucket:this.psdkData.appLaunchBucket||"none",entitlement:this.psdkData.entitlement||"none",entitlementType:this.psdkData.entitlementType||"none",marketSegment:this.psdkData.marketSegment||"none",derivedPersona:this.psdkData.derivedPersona||"none",derivedSkill:this.psdkData.derivedSkill||"none",derivedAppLaunchBucket:this.psdkData.derivedAppLaunchBucket||"none",bonusLaunch:this.psdkData.bonusLaunch||"none",ccxVersion:this.psdkData.ccxVersion||"none",radarSessionGUID:this.psdkData.radarSessionGUID||"none"}),this.postEvent(i)}},logViewChangeEvent:function(e){var t=this.createPayload();t.eventType="uc-section",t.sectionView=e.sectionView,t.sectionType=e.sectionType,this.postEvent(t)},logItemOpenedEvent:function(e){var t=this.createPayload();t.eventType="uc-file-open",t.fileType=e.fileType,t.fileOpenType=e.openType,t.sectionView=e.sectionView,"undefined"!=typeof e.itemPosition&&(t.itemPosition=e.itemPosition),e.ucAction&&(t.ucAction=e.ucAction),e.cardID&&(t.cardID=e.cardID),e.eventAction&&(t.eventAction=e.eventAction),this.postEvent(t)},logMiscellaneousEvent:function(e){var t=this.createPayload();t.eventType=e.eventType||"uc-misc";for(var i in e)t[i]=e[i];this.postEvent(t)},logMobileCreationsEvent:function(e){var t=this.createPayload();t.eventType="mobile-creations";for(var i in e)e[i]&&(t[i]=e[i]);this.postEvent(t)},constructMobileCreationsEventData:function(e,t,i){var a={eventAction:t,cardTypeName:""};if("item"!==e)for(var n in i)i&&(a[n]=i[n]);switch(e){case"project":a.cardTypeName="project";break;case"pages":a.cardTypeName="pages";break;case"app":a.cardTypeName="appcards";break;case"item":a.cardTypeName="item",a.cardName=i.syncGroup||null,a.cardID=i.compositeId||null;break;default:iaw.log.console("Invalid Ingest Mobile Creations "+t+" event"),a=null}return a},logMobileCreationsRenderedEvent:function(e,t){var i=this.constructMobileCreationsEventData(e,"render",t);i&&this.logMobileCreationsEvent(i)},logMobileCreationsClickedEvent:function(e,t){var i="item"!==e?"click":"open",a=this.constructMobileCreationsEventData(e,i,t);a&&this.logMobileCreationsEvent(a)},logMobileCreationsErrorEvent:function(e){var t={eventAction:"error",errorCode:e};this.logMobileCreationsEvent(t)},logFNFTItemEvent:function(e){var t=this.createPayload();t.eventType="uc-file-open",t.fileOpenType="new",iaw.util.assign(t,e),this.postEvent(t)},logFNFTItemRenderedEvent:function(e){var t={eventAction:"render",cardTypeName:e.activeFilter,displayMode:e.displayPosition>=0?e.displayPosition:-1,sectionView:e.group&&"clipboard"===e.group?"clipboard":"blank",displayTemplate:e.isPreset?"preset":"stock-template",cardName:e.name||e.title,cardID:e.id||"preset"};e.isPreset||(t.attributes={price:e.price_prompt}),this.logFNFTItemEvent(t)},fnftUtil:{setCommonPayloadParameters:function(e,t){e.displayMode=t.displayPosition,e.cardTypeName=t.activeFilter,e.cardName=t.title,e.cardID=t.id||"preset"},setCommonStockPayloadParameters:function(e,t){this.setCommonPayloadParameters(e,t),e.displayTemplate="stock-template",e.attributes={price:t.price_prompt}},setCommonPresetPayloadParameters:function(e,t){this.setCommonPayloadParameters(e,t),e.displayTemplate="preset",e.attributes={},this.setAttributesFromPreset(e.attributes,t)},setAttributesFromPreset:function(e,t){for(var i in t)switch(i){case"width":case"height":case"mode":case"units":case"profile":case"fill":case"resolution":case"resolutionUnits":e[i]=t[i]}}},logFNFTActionClickedEvent:function(e,t){var i={eventAction:"click",ucAction:e};switch(t=t||{},e){case"preset-selected":this.fnftUtil.setCommonPresetPayloadParameters(i,t),delete i.ucAction;break;case"template-selected":this.fnftUtil.setCommonStockPayloadParameters(i,t),delete i.ucAction;break;case"stock-search":i.displayTemplate="stock-template",i.cardTypeName=t.activeFilter,i.actionURL=t.actionURL+"&as_content=ccxstart-search";break;case"stock-sidebar":this.fnftUtil.setCommonStockPayloadParameters(i,t),i.actionURL=t.actionURL+"&as_content=ccxstart-sidebar";break;case"render-preview":i.eventAction="render",i.ucAction="preview",this.fnftUtil.setCommonStockPayloadParameters(i,t);break;case"close-template":i.ucAction="close",this.fnftUtil.setCommonStockPayloadParameters(i,t);break;case"open-template":i.ucAction="open",this.fnftUtil.setCommonStockPayloadParameters(i,t);break;case"preview":case"preview-close":case"preview-back":case"license-template":case"download-start":case"download-end":case"download":this.fnftUtil.setCommonStockPayloadParameters(i,t);break;case"too-large-render":this.fnftUtil.setCommonStockPayloadParameters(i,t),i.ucAction="download-large",i.eventAction="render";break;case"close":this.fnftUtil.setCommonPresetPayloadParameters(i,t);break;case"preset-viewmore":this.fnftUtil.setCommonPresetPayloadParameters(i,t),i.ucAction="viewmore",delete i.attributes;break;case"preset-create":this.fnftUtil.setCommonPresetPayloadParameters(i,t),i.attributesChanged=!1,i.ucAction="create",t.settings&&0!==Object.keys(t.settings).length&&t.settings.constructor===Object&&(i.attributesChanged=t.settings.attributesChanged||!1,i.attributesChanged&&(i.newAttributes={},this.fnftUtil.setAttributesFromPreset(i.newAttributes,t.settings)));break;case"more-options":this.fnftUtil.setCommonPresetPayloadParameters(i,t),iaw.util.assign(i,t.presetAttributes);break;case"tab-selected":i.cardTypeName=t.activeFilter;break;case"welcome-rendered":i.displayTemplate="welcome",i.eventAction="render",i.displayCount=t.displayCount,i.cardTypeName=t.activeFilter,i.ucAction="render";break;case"welcome-closed":i.displayTemplate="welcome",i.cardTypeName=t.activeFilter,i.ucAction="close"}this.logFNFTItemEvent(i)}}};var iaw=iaw||{};iaw.cepUtil={oneTimeHandler:!1,csInterface:window.__adobe_cep__?new CSInterface:null,isStage:null,applicationID:window.__adobe_cep__?(new CSInterface).getApplicationID():"SIMU",events:{EXTENSIONREADY:"com.adobe.ccx.start.extensionReady",LOGPIP:"com.adobe.ccx.start.LOGPIP",kOpenRecentFile:"com.adobe.ccx.start.handleRecentFileOpen",kExecuteMenuCmd:"com.adobe.ccx.start.handleExecuteMenuCommand",kHostStatusChanged:"com.adobe.ccx.start.hostStatusChanged",REQUESTHOSTCLOSE:"com.adobe.ccx.start.requestHostClose",kOpenDropFiles:"com.adobe.ccx.start.handleDropFileOpen",kOpenPreferences:"com.adobe.ccx.start.handleOpenPreferences",kTrialExpired:"com.adobe.ccx.start.trialExpired",kGetUserJSONDataRequest:"com.adobe.ccx.start.getCCXUserJSONData.request",kGetUserJSONDataResponse:"com.adobe.ccx.start.getCCXUserJSONData.response",NEWDOCFROMTEMPLATE:"com.adobe.ccx.fnft.newDocFromTemplate",HOSTCLOSEFNFT:"com.adobe.ccx.fnft.hostRequestsClose",LOADEXTENSION:"com.adobe.extension.loadExtension",INTERACTIVEREADY:"com.adobe.extension.interactiveReady"},authenticationInfo:{adobeStock:{clientID:"AdobeStockClient1",clientScope:"AdobeID,openid,creative_cloud,read_organizations,gnav,additional_info.address.mail_to,sao.stock"},adobeLearn:{clientID:"adobedotcom2",clientScope:"creative_cloud,AdobeID,openid,gnav,read_organizations,additional_info.projectedProductContext"},adobeAccount:{clientID:"adobedotcom2",clientScope:"creative_cloud,AdobeID,openid,gnav,read_organizations,additional_info.projectedProductContext"}},imsInfo:{imsInterface:window.__adobe_cep__?new IMSInterface:null,stageConfig:{label:"Stage",clientId:"CCXInAppWelcome",clientSecret:"2625f91d-efa1-4685-a64d-eb36ad123f09",scope:"openid,AdobeID,creative_cloud",redirectUri:"https://oobe.adobe.com",imsServer:"ims-na1-stg1.adobelogin.com"},productionConfig:{label:"Production",clientId:"CCXInAppWelcome",clientSecret:"75606424-3628-4f70-82fb-9a1bf5dfb6b5",scope:"openid,AdobeID,creative_cloud",redirectUri:"https://oobe.adobe.com",imsServer:"ims-na1.adobelogin.com"},activeConfig:null,imsRef:null,imsTimeout:null,accessToken:null,accessTokenCallbacks:[],accessTokenInProgress:!1,lastAccessTokenTime:(new Date).valueOf(),needRetry:!0,setEnvironment:function(e){this.activeConfig="stage"===e?this.stageConfig:this.productionConfig;
},isIMSDataValid:function(e){return e&&e.data&&""!==e.data},handleFetchAccessToken:function(e){var t=this;if(!(e&&e.extensionId!==iaw.cepUtil.getExtensionID()||e&&e.data&&e.data.jump)){if(t.imsTimeout&&(clearTimeout(t.imsTimeout),t.imsTimeout=null),t.imsInterface.removeEventListener(t.imsInterface.events.imsFetchAccessToken,t.handleFetchAccessToken),t.isIMSDataValid(e)){switch(typeof e.data){case"string":var i=JSON.parse(e.data);t.accessToken=i&&i.access_token?i.access_token:null;break;case"object":t.accessToken=e.data.access_token||null;break;default:t.accessToken=null}t.accessToken||iaw.log.console("IMS response event: "+JSON.stringify(e))}else iaw.log.console("Failed to get access token: "+JSON.stringify(e));if(t.accessTokenInProgress=!1,iaw.log.console("IMS accessToken is : "+t.accessToken),null===t.accessToken&&t.needRetry)return t.needRetry=!1,void iaw.cepUtil.imsInfo.getAccessToken();var a=t.accessTokenCallbacks.length;if(a){t.lastAccessTokenTime=(new Date).valueOf();for(var n=0;n<a;++n){var s=t.accessTokenCallbacks[n];s&&s(t.accessToken)}t.accessTokenCallbacks=[]}}},accessTokenTimeout:function(){iaw.log.console("IMS access token fetch has timed out"),iaw.cepUtil.imsInfo.imsTimeout=null,iaw.cepUtil.imsInfo.handleFetchAccessToken(null)},getAccessToken:function(e){var t=this;if(t.activeConfig||(t.activeConfig=t.productionConfig),t.accessTokenInProgress)t.accessTokenCallbacks.push(e);else{var i=(new Date).valueOf();if(i-t.lastAccessTokenTime>=864e5&&(iaw.log.console("Clear expired access token."),t.clearAccessToken()),t.accessToken&&0!==t.accessToken.length&&e)return void e(t.accessToken);t.accessTokenInProgress=!0,e&&t.accessTokenCallbacks.push(e),!t.imsRef&&t.imsInterface&&(t.imsRef=t.imsInterface.imsConnect(t.activeConfig.clientId)),t.imsInterface.addEventListener(t.imsInterface.events.imsFetchAccessToken,function(e){this.handleFetchAccessToken(e)}.bind(this)),iaw.localstorage.userID?t.imsInterface.imsFetchAccessToken(t.imsRef,t.activeConfig.clientId,t.activeConfig.clientSecret,iaw.localstorage.userID,t.activeConfig.redirectUri,t.activeConfig.scope):t.imsInterface.imsGetCurrentUserIdHelper(function(e){e&&e.length>0&&t.imsInterface.imsFetchAccessToken(t.imsRef,t.activeConfig.clientId,t.activeConfig.clientSecret,e,t.activeConfig.redirectUri,t.activeConfig.scope)}),t.imsTimeout&&clearTimeout(t.imsTimeout),t.imsTimeout=setTimeout(t.accessTokenTimeout,1e4)}},getIMSAccounts:function(){var e=this;return e.activeConfig||(e.activeConfig=e.productionConfig),!e.imsRef&&e.imsInterface&&(e.imsRef=e.imsInterface.imsConnect(e.activeConfig.clientId)),e.imsInterface.imsFetchAccounts(e.imsRef,e.activeConfig.clientId)},clearAccessToken:function(){this.accessToken=null},createFetchContinueTokenCall:function(e,t,i,a){iaw.log.console("createFetchContinueTokenCall attempting SSO workflows"),this.imsInterface.addEventListener(this.imsInterface.events.imsFetchContinueToken,a);var n=encodeURIComponent(i);this.imsInterface.imsFetchContinueToken(this.imsRef,this.accessToken,e,n,t,"token","")},jumpURL:function(e,t,i,a){var n=this,s=function(e){n.imsInterface.removeEventListener(n.imsInterface.events.imsFetchContinueToken,s),a&&a(n.isIMSDataValid(e)&&e.data.details.jump?e.data.details.jump:i)};iaw.log.console("Attempting SSO workflows for url "+i),this.createFetchContinueTokenCall(e,t,i,s)},isStagingRedirectInEffect:function(){var e=!1;if(!window.__adobe_cep__||!window.DOMParser)return e;try{var t=new CSInterface,i=t.getOSInformation().indexOf("Win")>=0?t.getSystemPath(SystemPath.EXTENSION)+"\\..\\..\\..\\..\\..\\Adobe\\Adobe Creative Cloud\\C3Config.xml":"/Applications/Utilities/Adobe Creative Cloud/C3Config.xml",a=window.cep.fs.readFile(i);if(0!==a.err)return e;var n=(new DOMParser).parseFromString(a.data,"text/xml"),s=n.getElementsByTagName("C3Config")[0].getElementsByTagName("config")[0];if(s)for(var o=s.getElementsByTagName("namespace"),r=0;r<o.length;r++){var c=o[r];if(c&&"accc.container"===c.getAttribute("name"))for(var l=c.getElementsByTagName("property"),d=0;d<l.length;d++){var u=l[d];if(u&&"IMS_ENV"===u.getAttribute("name")){var p=u.firstChild.nodeValue;"STG"===p&&(e=!0)}}}}catch(g){}return e}},imsValid:function(){return Boolean(this.imsInfo.imsInterface)},evalExtendScript:function(e,t){t||(t=function(e){}),window.__adobe_cep__?window.__adobe_cep__.evalScript(e,t):t(null)},evalExtendScriptWithParams:function(){if(arguments.length<2)throw new Error("evalExtendScriptWithParams needs at least two arguments: script and callback");var e,t,i=Array.prototype.slice.call(arguments),a=i.pop(),n=i.shift();e=i.map(function(e){var t="object"==typeof e?JSON.stringify(e):e;return"string"==typeof t?'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"':t}),t=n+"("+e.join(",")+")",window.__adobe_cep__?window.__adobe_cep__.evalScript(t,a):a(null)},sendEvent:function(e,t,i){if(window.__adobe_cep__){var a=new CSEvent;a.scope="APPLICATION",a.appId=this.applicationID,a.extensionId=i||iaw.cepUtil.getExtensionID(),a.type=e,a.data=t,this.csInterface.dispatchEvent(a)}},getExtensionID:function(){return window.__adobe_cep__&&this.csInterface?this.csInterface.getExtensionID():""},getExtensionVersion:function(e){var t={version:"0.0.0",sha:null};if(window.__adobe_cep__){var i=this.csInterface,a=i.getSystemPath(SystemPath.EXTENSION),n=i.getOSInformation(),s=n.indexOf("Win")>=0?"\\":"/",o=a+s+"CSXS"+s+"manifest.xml",r=window.cep.fs.readFile(o);if(window.DOMParser){var c=new window.DOMParser,l=c.parseFromString(r.data,"text/xml"),d=l.getElementsByTagName("ExtensionManifest")[0];"undefined"!=typeof d&&d&&(t.sha=d.attributes.getNamedItem("SHA").nodeValue,t.version=e?d.attributes.getNamedItem("ExtensionBundleVersion").nodeValue:d.getElementsByTagName("ExtensionList")[0].firstElementChild.attributes.getNamedItem("Version").nodeValue)}}return t},isUserSignedIn:function(e){var t=this.imsInfo.imsInterface;t&&t.imsGetCurrentUserIdHelper(function(t){e&&(t&&t.length>0?e(!0,t):e(!1,null))})},setEnvironment:function(e){this.imsInfo.imsInterface&&this.imsInfo.setEnvironment(e)},usingStageAuthentication:function(){return null===this.isStage&&(this.isStage=this.imsInfo.isStagingRedirectInEffect()),this.isStage},getIMSAccessToken:function(e){this.imsInfo.imsInterface&&this.imsInfo.getAccessToken(e)},getPrimaryAccountType:function(){var e="",t="";try{this.imsInfo.imsInterface&&(t=this.imsInfo.getIMSAccounts());var i=(new DOMParser).parseFromString(t,"text/xml"),a=i.getElementsByTagName("UserAccounts")[0].getElementsByTagName("UserData")[0].getElementsByTagName("AccountType")[0];a&&(e=a.firstChild.nodeValue)}catch(n){iaw.log.console("Exception in fetching account type"),iaw.log.exception("Fetch account type exception: "+n.message)}return e},clearAccessToken:function(){this.imsInfo.imsInterface&&this.imsInfo.clearAccessToken()},getUIThemeColor:function(){return this.csInterface?this.csInterface.getHostEnvironment().appSkinInfo.panelBackgroundColor.color:null},addThemeChangeListener:function(){this.csInterface&&this.csInterface.addEventListener("com.adobe.csxs.events.ThemeColorChanged",function(e){iaw.util.setUIThemeMode()}.bind(this))},createJumpURL:function(e,t,i,a){this.imsValid&&this.imsInfo.jumpURL(e,t,i,a)},getExtensionPath:function(){var e=null;if(this.csInterface){var t=this.csInterface.getOSInformation(),i=t.indexOf("Win")>=0?"\\":"/";e=this.csInterface.getSystemPath(SystemPath.EXTENSION)+i}return e}};var iaw=iaw||{};iaw.i18n={localizedStringTable:null,urlLocalizationTable:null,normalizeLocaleID:function(e){return e?e.toLowerCase().replace("_","-"):e},addFromLocalLocaleFile:function(e,t){var i=this,a=new XMLHttpRequest;a.overrideMimeType("application/json"),a.onreadystatechange=function(){4===a.readyState&&a.responseText&&(a.responseText&&(i.localizedStringTable=JSON.parse(a.responseText)),document.getElementsByTagName("html")[0].setAttribute("lang",e.toLowerCase().replace(/_/,"-")),t&&t())},a.open("GET","./locale/"+e+"/strings.json",!0),a.send()},addLocalizedString:function(e,t){e&&(this.localizedStringTable[e]=t)},getLocalizedString:function(e){var t=this.localizedStringTable&&e?this.localizedStringTable[e]:null,i=t?t.replace("^n","<br>"):"";return i},getLocalizedSubstitutionString:function(e,t){var i=this.localizedStringTable&&e?this.localizedStringTable[e]:null;if(i&&t)for(var a=0;a<t.length;a++)i=i.replace("^"+a,t[a]);else i="";return i},setDocumentElementString:function(e,t,i){t=t?t:e;var a=document.getElementById(e);a&&(a.innerHTML=i?t:this.getLocalizedString(t))},addFromURLFile:function(e){var t=this,i=new XMLHttpRequest;i.overrideMimeType("application/json"),i.onreadystatechange=function(){if(4===i.readyState&&i.responseText&&i.responseText)try{t.urlLocalizationTable=JSON.parse(i.responseText)}catch(e){iaw.log.exception("i18n go URL table parse error: "+e.message)}},"goURL"===e&&i.open("GET","./locale/goURL.json",!0),i.send()},getLangSuffixForHelpURL:function(e){var t=this.urlLocalizationTable&&this.urlLocalizationTable.help&&e?this.urlLocalizationTable.help[e]:null;return t?t:"en"},getLangSuffixForAccountURL:function(e){var t=this.urlLocalizationTable&&this.urlLocalizationTable.account&&e?this.urlLocalizationTable.account[e]:null;return t?t:"en"},getLangSuffixForMobileCreationsGoURL:function(e){var t=this.urlLocalizationTable&&this.urlLocalizationTable.mobilecreations&&e?this.urlLocalizationTable.mobilecreations[e]:null;return t&&"en"!==t?"_"+t:""}};var iaw=iaw||{};iaw.json={readLocalJSONFile:function(e){var t=null;if(window.__adobe_cep__&&e){var i=window.cep.fs.readFile(e);if(0===i.err)try{t=JSON.parse(i.data)}catch(a){iaw.log.exception("Failed to read JSON file with path ["+e+"], error="+a),t=null}else 3===i.err?iaw.log.console("Attempt to read JSON file failed, file does not exist ["+e+"]"):iaw.log.console("Attempt to read JSON file failed with path ["+e+"], error code="+i.err)}return t},commonDataReceiver:function(e,t){switch(e){case"userTrackingEnabled":"string"==typeof t&&(t="true"===t||"1"===t),iaw.analytics.enabled=t;break;case"fnftEnabled":"string"==typeof t&&(t="true"===t||"1"===t);break;case"shortcut":t=t.replace(/Cmd\+/,"⌘");break;case"language":t="en_IL"!==t&&"en_AE"!==t?t:"en_US"}return t},startDataReceiver:function(e,t){switch(e){case"thumbnailViewEnabled":case"listViewEnabled":"string"==typeof t&&(t="true"===t||"1"===t);break;case"size":t=parseInt(t);break;case"thumb":t&&(t="data:image/jpeg;base64,"===t?"":t.replace(/\n/g,""));break;case"icon":if(t.indexOf("SP_Preset")<0&&t.indexOf("SP_QuickStart")<0)switch(t){case"aep":case"pr_proj_primary":case"pr_convert_premiere_clip":t="CCX_Start_DefaultThumb_Pr_Ae";break;case"ai":case"psd":case"id":case"id_library":case"id_book":t="CCX_Start_DefaultThumb_Ps_Ai_Id";break;default:t="CCX_Start_DefaultThumb_other"}break;case"dontShowAgain":"string"==typeof t&&(t="true"===t||"1"===t);break;case"secondsLeftInTrial":case"appStartClockTime":"string"==typeof t&&(t=parseInt(t));break;default:t=iaw.json.commonDataReceiver(e,t)}return t},fnftDataReceiver:function(e,t){switch(e){default:t=iaw.json.commonDataReceiver(e,t)}return t}};var iaw=iaw||{};iaw.libraryManager={statusLookupMap:{},hasSyncListener:!1,DOWNLOADED:"downloaded",DOWNLOADING:"downloading",DOWNLOAD_ERR:"error",TEMPLATE_ELEMENT_TYPE:"application/vnd.adobe.element.template+dcx",MIME_TYPE:{PHXS:"image/vnd.adobe.photoshop.template",ILST:"application/illustrator.template"},initialized:!1,libraryCollection:null,debounce:300,lastSyncTime:(new Date).valueOf(),pendingSyncTimeout:null,cclibraryProcessLaunchPending:!1,init:function(e){var t=this;if(!t.initialized){if(!window.__adobe_cep__)return void iaw.fnftFakeLicensedTemplates.forEach(function(e){t.statusLookupMap[e.id]={templateId:e.id,downloadStatus:t.DOWNLOADED,path:e.url}});this.initialized=!0,iaw.util.loadLibrary([t.TEMPLATE_ELEMENT_TYPE]).then(function(i){t.libraryCollection=i[0],t.libraryCollection.addSyncListener(function(){t.onSync()}),e.forEach(function(e){t.statusLookupMap[e.id]={templateId:e.id,downloadStatus:t.DOWNLOADED,path:e.url,elementRef:e.elementRef}})})}},getTemplateLibrary:function(){var e=this;return new Promise(function(t,i){iaw.util.loadLibrary([e.TEMPLATE_ELEMENT_TYPE]).then(function(e){var i,a=e[0],n=iaw.i18n.getLocalizedString("stock_template_library_name");a.libraries.forEach(function(e){i||e.name!==n||(i=e)}),i||(i=a.createLibrary(n)),t(i)})})},isRepresentationDownloadPending:function(e){return!!e.isExternalLink&&(!e.getCachedContentPath()&&!e.getCachedExternalLinkError())},isElementDownloadPending:function(e){var t=this;return e.representations.some(function(e){return t.isRepresentationDownloadPending(e)})},retryElementDownload:function(e){var t=this;e.representations.forEach(function(e){t.isRepresentationDownloadPending(e)&&e.getContentPath()})},getElementDownloadProgress:function(e){var t;return e.representations.forEach(function(e){void 0===t&&(t=e.getExternalLinkDownloadProgress())}),t},onSync:function(){var e=this;if(!this.pendingSyncTimeout){var t=(new Date).valueOf();if(t-this.lastSyncTime<this.debounce)return void(this.pendingSyncTimeout=setTimeout(function(){e.pendingSyncTimeout=void 0,e.onSync()},this.debounce));this.lastSyncTime=t;var i=this.statusLookupMap;e.libraryCollection.libraries.forEach(function(t){t.getFilteredElements(e.TEMPLATE_ELEMENT_TYPE).forEach(function(t){if(void 0!==iaw.stockUtil.getElementStockLicense(t)){var a=iaw.stockUtil.getElementStockId(t),n=i[a]||{templateId:a},s=n.progress;n.progress=e.getElementDownloadProgress(t);var o=n.downloadPending;n.downloadPending=e.isElementDownloadPending(t);var r="Stock template ["+n.templateId+"] ";if(n.downloadPending!==o||n.progress!==s){if(void 0===n.progress||o&&!n.downloadPending){if(s&&n.progress&&n.progress<s)return;return void t.getPrimaryRepresentation().getContentPath(function(s,o){if(!(s||n.downloadStatus===e.DOWNLOADED&&n.path===o)){if(n.downloadStatus!==e.DOWNLOADED){var c=iaw.util.getTemplateData(a)||{};iaw.analytics.ingest.logFNFTActionClickedEvent("download-end",c),iaw.log.console(r+"is downloaded."),c&&(c.licensedTime=t.modified,c.lastUsedTime=iaw.localstorage.getUserItem("templateLUT_"+a)||t.modified,c.template_category=c.template_category||[],c.template_category.indexOf("saved")===-1&&c.template_category.push("saved"))}n.downloadStatus=e.DOWNLOADED,n.path=o,n.elementRef=t.getReference(),iaw.store.set(["input","download-status"],n),i[a]=n}})}if(n.progress===-1){if(n.downloadStatus===e.DOWNLOAD_ERR)return;n.downloadStatus=e.DOWNLOAD_ERR,iaw.log.console(r+"fail to be downloaded."),iaw.store.set(["input","download-status"],n)}else n.progress>=s&&n.downloadPending&&(n.downloadStatus=e.DOWNLOADING,n.licensedTime=t.modified,n.lastUsedTime=t.modified,iaw.log.console(r+"is being downloaded, progress="+n.progress),iaw.store.set(["input","download-status"],n));i[a]=n}else n.downloadPending&&i[a].downloadStatus!==e.DOWNLOADING&&(iaw.analytics.ingest.logFNFTActionClickedEvent("download-start",iaw.util.getTemplateData(a)||{}),n.downloadStatus=e.DOWNLOADING,n.progress=0,i[a]=n,iaw.store.set(["input","download-status"],n))}})})}},buildupTemplate:function(e,t,i){var a=this;return new Promise(function(n,s){if(!e||t&&void 0===iaw.stockUtil.getElementStockLicense(e)||a.isElementDownloadPending(e))return s();var o=e.getPrimaryRepresentation();return o?void o.getContentPath(function(t,a){return t?s(t):void e.getThumbnailPath(202,function(t,s){t&&(s=null);var r=iaw.stockUtil.getElementStockId(e);n({id:r,mime_type:i,template_category:["saved","recent"],title:e.name,created:e.created,licensedTime:e.modified,modified:e.modified,lastUsedTime:iaw.localstorage.getUserItem("templateLUT_"+r)||e.modified,description:iaw.i18n.getLocalizedString("newdoc_details_template_default"),thumbnail_url:s,width:o.width,height:o.height,url:a,size:o.contentLength,elementRef:e.getReference(),previews:[]})})}):s()})},isConnected:function(){return ccLibraries.isConnected()},getServiceInfo:function(){return ccLibraries.getServiceInfo()},isProcessInstalled:function(){return VulcanInterface.isAppInstalled("cclibraries")},isProcessRunning:function(){return VulcanInterface.isAppRunning("cclibraries")},launchCCLibraryProcess:function(){function e(){i&&clearInterval(i),iaw.libraryManager.cclibraryProcessLaunchPending=!1,ccLibraries.reconnect(),VulcanInterface.removeMessageListener(a,e),setTimeout(function(){iaw.libraryManager.isConnected()||iaw.libraryManager.launchCCLibraryProcess()},1e3)}function t(){if(iaw.libraryManager.isConnected())return void e();var t=iaw.libraryManager.getServiceInfo()||{};t.updateRequired||!iaw.libraryManager.isProcessInstalled()||iaw.libraryManager.isProcessRunning()||(iaw.log.console("Launching CCLibrary Process"),VulcanInterface.launchApp("cclibraries",!1))}if(!iaw.libraryManager.cclibraryProcessLaunchPending){var i,a="vulcan.SuiteMessage.cclibraries.service.Initialized";VulcanInterface.addMessageListener(a,e),ccLibraries.reconnect(),iaw.libraryManager.cclibraryProcessLaunchPending=!0,i=setInterval(t,5e3),t()}},getLicensedTemplates:function(e){var t=this;return new Promise(function(i,a){function n(e){iaw.perf.measure(iaw.perf.timers.RetrieveLicensedTemplate),e=e.filter(function(t,i){return e.indexOf(t)==i}),t.init(e),i(e)}return window.__adobe_cep__?void iaw.util.loadLibrary([t.TEMPLATE_ELEMENT_TYPE]).then(function(i){iaw.perf.set(iaw.perf.timers.RetrieveLicensedTemplate);var a=[],s=[];i.forEach(function(e){s=s.concat(e.libraries)}),s.forEach(function(e){a=a.concat(e.getFilteredElements(t.TEMPLATE_ELEMENT_TYPE))});var o=t.MIME_TYPE[e];o&&(a=a.filter(function(e){return e.getPrimaryRepresentation().isCompatibleType(o)}));var r=0,c=[];return a&&0!==a.length?void a.forEach(function(e){t.buildupTemplate(e,!0,o).then(function(e){c.push(e),++r===a.length&&n(c)})["catch"](function(){++r===a.length&&n(c)})}):void n([])})["catch"](function(e){a(e)}):(t.init(iaw.fnftFakeLicensedTemplates),void i(iaw.fnftFakeLicensedTemplates))})},elementRefsToTemplates:function(e){var t=this;return new Promise(function(i,a){function n(e){i(e)}return e?window.__adobe_cep__?void iaw.util.loadLibrary([t.TEMPLATE_ELEMENT_TYPE]).then(function(i){if(!ccLibraries)return void a();var s=0,o=[];e.forEach(function(e){e&&o.push(ccLibraries.resolveElementReference(e))});var r=[];return o&&0!==o.length?void o.forEach(function(e){t.buildupTemplate(e).then(function(e){r.push(e),++s===o.length&&n(r)})["catch"](function(){++s===o.length&&n(r)})}):void n([])})["catch"](function(e){a(e)}):void i(iaw.fnftFakeLicensedTemplates):void a()})},getTemplatePath:function(e,t){return new Promise(function(i,a){if(!window.__adobe_cep__){var n;return iaw.fnftFakeLicensedTemplates.forEach(function(e){e.id===t&&(n=e.url)}),n}var s=!1;e.libraries.forEach(function(e){e.elements.forEach(function(e){var a=iaw.stockUtil.getElementStockId(e);a!==t||s||(s=!0,e.getPrimaryRepresentation().getContentPath(function(e,t){i(t)}))})}),s||i()})},isTemplateLicensed:function(e){return this.statusLookupMap[e]&&this.statusLookupMap[e].downloadStatus===this.DOWNLOADED},isTemplateDownloading:function(e){return this.statusLookupMap[e]&&this.statusLookupMap[e].downloadStatus===this.DOWNLOADING},getTemplateStatus:function(e){return this.statusLookupMap[e]},setTemplateStatus:function(e,t){return this.statusLookupMap[e]=t},getElementRefById:function(e){return this.statusLookupMap[e]&&this.statusLookupMap[e].elementRef},getIdByElementRef:function(e){var t=ccLibraries&&ccLibraries.resolveElementReference(e);return t&&iaw.stockUtil.getElementStockId(t)}};var iaw=iaw||{};iaw.localstorage={userID:null,setUserItem:function(e,t){this.userID&&e&&(iaw.log.console("[iaw.localstorage.setUserItem] Setting "+e+" to "+t),window.localStorage[this.userID+"_"+e]=JSON.stringify(t))},getUserItem:function(e){var t=null;this.userID&&e&&(t=window.localStorage[this.userID+"_"+e]||null);try{t=JSON.parse(t)}catch(i){t=null}return t},setGlobalItem:function(e,t){e&&(window.localStorage[e]=JSON.stringify(t))},getGlobalItem:function(e){var t=null;e&&(t=window.localStorage[e]||null);try{t=JSON.parse(t)}catch(i){t=null}return t}};var iaw=iaw||{};iaw.log={enabled:!0,kLogPrefix:"CCX-Start",console:function(e,t){var i="     ",a="",n=0,s=!1;"object"==typeof t?(a=t.prefix?" - "+t.prefix:a,n=t.indent?t.indent:n,s=t.trace?t.trace:s):"string"==typeof t&&(a=" - "+t);for(var o=this.kLogPrefix+a+" :: ";n>0;n--)o+=i;o+=e,console.log(o),s&&console.trace()},dump:function(e,t){console.log("<< "+this.kLogPrefix+" >> object: "+(t?t+" - %o":"%o"),e)},debug:function(e){this.console(e,"DEBUG")},separator:function(){console.log(this.kLogPrefix+"==========================================================")},mark:function(e,t){this.separator(),this.console("@"+Date()+" "+e,t)},logObject:function(e,t,i){if(this.console(e),i="undefined"!=typeof i?i:1,"undefined"!=typeof t&&null!==t){var a=null;switch(typeof t){case"object":for(var n in t)a=typeof t[n],this.console(n+" = "+t[n]+" ("+a+")",{indent:i});break;case"array":for(var s=t.length,o=0;o<s;o++)a=typeof t[o],this.console("array["+o+"]= "+t[o]+" ("+a+")",{indent:i});break;default:this.console("("+typeof t+") : "+t,{indent:i})}}},logJSON:function(e,t){window.__adobe_cep__?this.console(e+" "+JSON.stringify(t)):this.console(e+"\n"+JSON.stringify(t,null,4))},exception:function(e){console.trace(),console.error(this.kLogPrefix+" EXCEPTION! "+e.stack)}};var iaw=iaw||{};iaw.motor={_running:!1,_steps:0,_cycle:30,_throttleSwitch:!1,_pistons:[],start:function(){iaw.motor._running=!1,iaw.motor._steps=0,window.addEventListener("resize",iaw.motor.kick.bind(this),!1)},update:function(){if(iaw.motor._steps++>iaw.motor._cycle)return void(iaw.motor._running=!1);if(iaw.motor._throttleSwitch=!iaw.motor._throttleSwitch,iaw.motor._throttleSwitch)for(var e=0;e<iaw.motor._pistons.length;e++){var t=iaw.motor._pistons[e];t.func.call(t.scope||window)}window.requestAnimationFrame(iaw.motor.update)},kick:function(){iaw.motor._steps=0,iaw.motor._running||(iaw.motor._running=!0,iaw.motor.update())},add:function(e,t){e||console.error("[iaw.motor.add] Pass in a valid function");var i=iaw.util.hashStr(e.toString()),a=iaw.motor.has(i);a===-1&&iaw.motor._pistons.push({func:e,scope:t,key:i})},remove:function(e){var t=iaw.util.hashStr(e.toString()),i=iaw.motor.has(t);i!==-1&&iaw.motor._pistons.splice(i,1)},has:function(e){var t,i=-1;for(t=0;t<iaw.motor._pistons.length;t++)if(i=iaw.motor._pistons[t].key,i===e)return t;return-1}},iaw.perf={logToHighBeam:!1,timers:{DataTime:"all data loaded",HostData:"host data",HostPresetData:"host preset data",PSDKData:"psdk data",StockData:"stock data",LicensedData:"licensed templates",LoadLibraryFile:"load Library file",InitLibrary:"library init",RetrieveLicensedTemplate:"retreive licensed template",TemplateFixup:"template fixup",InitHost:"host init",InitStock:"stock init",JSLibLateLoad:"JS scripts late load",InitLicensed:"licensed templates init",UI:"UI",LoadTime:"total load time",InteractiveTime:"interactive ready",FinalizeData:"finalize all data",RenderTime:"render time"},_timers:{},set:function(e){this._timers[e]=window.performance.now()},measure:function(e,t){var i=window.performance.now();if(!this._timers[e]&&!t)return void iaw.log.console("[perf.measure] metric for key: '"+e+"' was not set - ignoring measure mark");t=t||this._timers[e];var a=e+": "+Math.round(i-t)+" ms";iaw.log.console("[perf.measure] "+a),this.logToHighBeam&&iaw.analytics.pip.logEvent("fnftCategory","performance",a)},log:function(){var e=window.performance.now();for(var t in this._timers)iaw.log.console("[perf.log] "+t+" "+(e-this._timers[t])+" ms")}};var iaw=iaw||{};iaw.profile={configurations:{stage:{url:"https://cc-collab-stage.adobe.io/profile",expirationDays:1},prod:{url:"https://cc-collab.adobe.io/profile",expirationDays:1}},config:null,retryAttempt:0,fetchImage:function(e,t,i){var a,n=this;iaw.util.promise("GET",n.config.url,t).then(function(t){switch(typeof t){case"string":a=JSON.parse(t).user.avatar;break;case"object":a=t.user.avatar}return a?(iaw.util.downLoadImage(a,function(t){if(!t)return void(n.callback&&n.callback(null));var s=new window.FileReader;s.readAsDataURL(t),s.onloadend=function(){var t=s.result;iaw.localstorage.setUserItem("profile_image",t),iaw.localstorage.setUserItem("profile_image_timestamp",(new Date).getTime()),iaw.log.debug("["+a+"] Downloaded profile image for user ["+e+"]"),i(t)}}),void(n.retryAttempt=0)):i(null)})["catch"](function(t){iaw.log.debug("Fail to download profile image with retryAttempt="+n.retryAttempt),0===n.retryAttempt&&(iaw.cepUtil.clearAccessToken(),n.getProfilePicture(e,i,++n.retryAttempt))})},isProfilePictureAvailable:function(e){var t=!1,i=this.config.expirationDays,a=iaw.localstorage.getUserItem("profile_image"),n=iaw.localstorage.getUserItem("profile_image_timestamp");if(a&&n){var s=((new Date).getTime()-n)/864e5;t=n&&s<i}return t},getProfilePicture:function(e,t,i){if(this.retryAttempt=i||0,this.config=this.config||(iaw.cepUtil.usingStageAuthentication()?this.configurations.stage:this.configurations.prod),iaw.log.debug("Start to get profile Picture, for user ["+e+"]"),this.isProfilePictureAvailable(e)){iaw.log.debug("Found cached profile image for user ["+e+"]");var a=iaw.localstorage.getUserItem("profile_image");return void(t&&t(a))}iaw.cepUtil.getIMSAccessToken(function(i){iaw.profile.fetchImage(e,i,t)})}};var iaw=iaw||{};iaw.stockUtil={STOCK_NAMESPACE:"adobestock",STOCK_DATA_KEY:"trackingdata",STOCK_STATE_PURCHASED:"purchased",STOCK_STATE_NOT_PURCHASED:"not_purchased",getStockData:function(e){return e&&e.getValue(this.STOCK_NAMESPACE,this.STOCK_DATA_KEY)},getStockDataForElement:function(e,t){var i=void 0===t?e.getPrimaryRepresentation():e.representations[t],a=this.getStockData(i);return a&&i.isExternalLink&&i.getCachedExternalLinkError()?iaw.stockUtil.getStockDataForElement(e,void 0===t?0:t+1):a},getElementStockId:function(e){var t=this.getStockDataForElement(e);if(t)return Number(t.content_id)},getElementStockLicense:function(e){var t=this.getStockDataForElement(e);if(t&&t.state===this.STOCK_STATE_PURCHASED)return String(t.license)},licenseTemplate:function(e,t){return new Promise(function(i,a){iaw.cepUtil.setEnvironment(iaw.cepUtil.usingStageAuthentication()?"stage":"prod"),iaw.cepUtil.getIMSAccessToken(function(n){if(!n)return void a("Invalid access token.");var s=iaw.cepUtil.usingStageAuthentication()?"https://stock-stage.adobe.io/Rest/Libraries/1/Content/License?":"https://stock.adobe.ioRest/Libraries/1/Content/License?";s+="content_id="+e+"&license="+t,iaw.util.promise("GET",s,n).then(function(e){"string"==typeof e&&(e=JSON.parse(e)),i(e)})["catch"](function(e){a(e)})})})}};var iaw=iaw||{};iaw.util={currentBreakPoint:0,loadingLibrary:!1,libraryCollections:null,isWindowsOS:function(){return navigator.userAgent.indexOf("Mac OS X")===-1},convertQueryString:function(e){var t={};if(e){var i=e.indexOf("#");i!==-1&&(e=e.slice(0,i));var a='{"'+e.replace(/&/g,'","').replace(/=/g,'":"')+'"}';t=JSON.parse(a,function(e,t){var i=""===e?t:decodeURIComponent(t);return i=isNaN(i)?"true"===i||"false"!==i&&i:parseFloat(i)})}return t},parseQueryString:function(e){var t=Object.create(null);return"string"!=typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var i=e.replace(/\+/g," ").split("="),a=i.shift(),n=i.length>0?i.join("="):void 0;a=decodeURIComponent(a),n=void 0===n?null:decodeURIComponent(n),void 0===t[a]?t[a]=n:Array.isArray(t[a])?t[a].push(n):t[a]=[t[a],n]}),t):t},downLoadImage:function(e,t){iaw.log.debug("Downloading image from: "+e);var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&200===this.status&&(iaw.log.debug("Image is downloaded."),t(this.response))},i.onerror=function(e){t(null)},i.open("GET",e,!0),i.responseType="blob",i.send()},ajax:function(e,t,i){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===this.readyState&&200===this.status&&t.call(i||null,this.response)},a.onerror=function(e){iaw.log.debug("[util.ajax] Error"),t.call(i||null,e)},a.open("GET",e,!0),a.send()},normalize:function(e,t,i){return(e-t)/(i-t)},openDefaultBrowser:function(e,t){t=t||!1,t||iaw.analytics.pip.logInteractionEvent("OpenExtLink:"+e),window.cep.util.openURLInDefaultBrowser?window.cep.util.openURLInDefaultBrowser(e):window.open(e,"_blank")},openDefaultBrowserAuthenicated:function(e,t){if(iaw.cepUtil.imsValid()){var i=t.indexOf("?");iaw.analytics.pip.logInteractionEvent("OpenExtLink:"+t.substr(0,i>0?i:t.length));var a=function(e){iaw.util.openDefaultBrowser(e,!0)};this.jumpToURL(iaw.cepUtil.authenticationInfo[e].clientID,iaw.cepUtil.authenticationInfo[e].clientScope,t,a)}else this.openDefaultBrowser(t)},setUIThemeMode:function(e){switch(e){case"light":document.body.classList.remove("spc--dark");break;case"dark":document.body.classList.add("spc--dark");break;default:var t=iaw.cepUtil.csInterface?iaw.cepUtil.getUIThemeColor():null;this.setUIThemeMode(t&&t.red>=184?"light":"dark")}},jumpToURL:function(e,t,i,a){i&&a&&e&&t&&window.__adobe_cep__&&iaw.cepUtil.getIMSAccessToken(function(n){n?iaw.cepUtil.createJumpURL(e,t,i,a):(iaw.log.console("No jump URL since access token is invalid."),a(i))})},loadExternalScript:function(e){return new Promise(function(t,i){var a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.defer=!1,a.src=e,a.onload=function(){t(a)},a.onerror=function(e){i(e)},document.body.appendChild(a)})},formatTimeStamp:function(e){return window.moment(e).format("YYYY-MM-DDTHH:mm:ss.SSSZZ")},openStockLink:function(e,t,i){var a=iaw.cepUtil.usingStageAuthentication()?"https://staging-astock1.fotolia.net/Search":"https://stock.adobe.com/Search",n=-1,s=0;switch(i="undefined"==typeof i?"":i,t){case"recent":case"saved":n=0;break;case"mobile":n=1;break;case"web":n=2;break;case"print":n=3;break;case"photo":n=4;break;case"film":n=5;break;case"art":n=6;break;default:n=-1}switch(e){case"PHXS":s=1;break;case"ILST":s=2;break;case"AEFT":s=0;break;case"DRWV":s=0;break;case"MUSE":s=0;break;case"PPRO":s=0;break;case"IDSN":s=0;break;default:s=0}i=i?"k="+iaw.util.fixedEncodeURIComponent(i)+"&":"",i+=iaw.analytics.getAnalyticsQueryString()+"&";var o="filters[content_type:template]=1&filters[template_type_id][]="+s,r=0===n?"":"&filters[template_category_id][]="+n,c="&as_channel=adobe_apps&as_source=app&as_campclass=brand&as_campaign=templates_"+e,l="ff_4815162342=true&",d=a+"?"+l+i+o+r+c;return window.__adobe_cep__?iaw.util.openDefaultBrowserAuthenicated("adobeStock",d):window.open(d),d},getTrialEndDate:function(e){var t=new Date((new Date).getTime()+1e3*e);return e>=0?this.formatTimeStamp(t):null},generateGUID:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"===e?t:3&t|8;return i.toString(16)})},showLibraryInPanel:function(e){var t=new CSInterface,i=function(){var i=new CSEvent("dlSetCurrentLibrary","APPLICATION");i.data={libraryId:e},t.dispatchEvent(i)},a=function(){t.removeEventListener("dlPanelInitialized",a),setTimeout(i,200)};i(),t.addEventListener("dlPanelInitialized",a),t.requestOpenExtension("com.adobe.DesignLibraries.angular","")},promise:function(e,t,i,a){return new Promise(function(n,s){var o=new XMLHttpRequest;o.open(e,t,!0),o.onload=function(){200===o.status||202===o.status?n(o.response):s(o.statusText)},o.onerror=function(){s(o.statusText||"Network Error")},i&&(o.setRequestHeader("x-api-key","CCXInAppWelcome"),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Authorization","Bearer "+i),a&&Object.keys(a).forEach(function(e){"undefined"!=typeof a[e]&&o.setRequestHeader(e,a[e])})),o.send()})},closeExtOnStatus:function(e){"true"===e.toLowerCase()&&window.__adobe_cep__&&(iaw.analytics.ingest.logScreenStateEvent("close-auto"),iaw.cepUtil.sendEvent(iaw.cepUtil.events.REQUESTHOSTCLOSE,null))},fixedEncodeURIComponent:function(e){var t=e&&e.length?encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)}):e;return t},roundDecimal:function(e,t){return Number(Math.round(e+("e"+t))+("e-"+t))},ceilDecimal:function(e,t){return Number(Math.ceil(e+("e"+t))+("e-"+t))},
floorDecimal:function(e,t){return Number(Math.floor(e+("e"+t))+("e-"+t))},mountTag:function(e,t,i,a,n){function s(e){o.removeEventListener("webkitTransitionEnd",s),o.removeEventListener("webkitAnimationEnd",s),o.removeEventListener("animationend",s),o.classList.remove(n),o.classList.add(a),riot.mount(o,t,i)}i=i||null,n=n||"anim--fade-out",a=a||"anim--fade-in";var o=e;return"string"!=typeof o||(o=document.querySelector(e))?(o.classList.remove("hidden"),o.classList.remove(n),o.classList.remove(a),void(o.children.length>0||o.attributes["data-is"]?(o.addEventListener("webkitTransitionEnd",s,!1),o.addEventListener("webkitAnimationEnd",s,!1),o.addEventListener("animationend",s,!1),o.classList.add(n)):(o.classList.add(a),riot.mount(o,t,i)))):void console.warn("[iaw.util.mountTag] No element found with selector "+e)},unmountTag:function(e,t,i){function a(t){n.removeEventListener("webkitTransitionEnd",a),n.removeEventListener("webkitAnimationEnd",a),n.removeEventListener("animationend",a),e.unmount(!0),n.removeAttribute("data-is"),n.classList.remove(i),n.classList.add("hidden")}i=i||"anim--fade-out",t=t||"anim--fade-in";var n=e.root;n.classList.contains(i)||(n.classList.remove(t),n.addEventListener("webkitTransitionEnd",a,!1),n.addEventListener("webkitAnimationEnd",a,!1),n.addEventListener("animationend",a,!1),n.classList.add(i))},showElement:function(e,t,i){i=i||"anim--fade-out",t=t||"anim--fade-in",e.classList.remove("hidden"),e.classList.remove(i),e.classList.remove(t),e.classList.add(t)},hideElement:function(e,t,i){function a(t){e.removeEventListener("webkitTransitionEnd",a),e.removeEventListener("webkitAnimationEnd",a),e.removeEventListener("animationend",a),e.classList.add("hidden")}i=i||"anim--fade-out",t=t||"anim--fade-in",e.classList.remove(i),e.classList.remove(t),e.addEventListener("webkitTransitionEnd",a,!1),e.addEventListener("webkitAnimationEnd",a,!1),e.addEventListener("animationend",a,!1),e.classList.add(i)},getRegionFromCountryCode:function(e){return iaw.util.countryCodeMap[e]},countryCodeMap:{US:"us",CA:"us",AI:"us",AG:"us",AR:"us",AW:"us",BS:"us",BB:"us",BZ:"us",BM:"us",BO:"us",BR:"us",KY:"us",CL:"us",CO:"us",CR:"us",DM:"us",DO:"us",EC:"us",SV:"us",FK:"us",GF:"us",GD:"us",GP:"us",GT:"us",GY:"us",HT:"us",HN:"us",JM:"us",MQ:"us",MX:"us",MS:"us",AN:"us",NI:"us",PA:"us",PY:"us",PE:"us",KN:"us",LC:"us",PM:"us",VC:"us",GS:"us",SR:"us",TT:"us",TC:"us",UM:"us",UY:"us",VE:"us",VG:"us",AS:"us",PR:"us",GB:"eu",AL:"eu",DZ:"eu",AD:"eu",AO:"eu",AM:"eu",AT:"eu",AZ:"eu",BY:"eu",BE:"eu",BJ:"eu",BA:"eu",BW:"eu",IO:"eu",BG:"eu",BF:"eu",BI:"eu",CM:"eu",CV:"eu",CF:"eu",TD:"eu",KM:"eu",CD:"eu",CG:"eu",HR:"eu",CY:"eu",CZ:"eu",DK:"eu",DJ:"eu",EG:"eu",GQ:"eu",ER:"eu",EE:"eu",ET:"eu",FO:"eu",FI:"eu",FR:"eu",GA:"eu",GM:"eu",GE:"eu",DE:"eu",GH:"eu",GI:"eu",GR:"eu",GL:"eu",GN:"eu",GW:"eu",HU:"eu",IS:"eu",IE:"eu",IT:"eu",CI:"eu",KE:"eu",LV:"eu",LS:"eu",LR:"eu",LY:"eu",LI:"eu",LT:"eu",LU:"eu",MK:"eu",MG:"eu",MW:"eu",ML:"eu",MT:"eu",MR:"eu",MU:"eu",YT:"eu",MD:"eu",MC:"eu",ME:"eu",MA:"eu",MZ:"eu",NA:"eu",NL:"eu",NE:"eu",NG:"eu",NO:"eu",PS:"eu",PL:"eu",PT:"eu",RE:"eu",RO:"eu",RW:"eu",SH:"eu",SM:"eu",ST:"eu",SN:"eu",CS:"eu",RS:"eu",SC:"eu",SL:"eu",SK:"eu",SI:"eu",SO:"eu",ZA:"eu",ES:"eu",SJ:"eu",SZ:"eu",SE:"eu",CH:"eu",TZ:"eu",TG:"eu",TN:"eu",UG:"eu",UA:"eu",VA:"eu",EH:"eu",ZM:"eu",ZW:"eu",AF:"ap",AQ:"ap",AU:"ap",BH:"ap",BD:"ap",BT:"ap",BN:"ap",MM:"ap",KH:"ap",CN:"ap",CX:"ap",CC:"ap",CK:"ap",TL:"ap",FJ:"ap",PF:"ap",HK:"ap",IN:"ap",ID:"ap",IQ:"ap",IL:"ap",JP:"ap",JO:"ap",KZ:"ap",KI:"ap",KR:"ap",KW:"ap",KG:"ap",LA:"ap",LB:"ap",MO:"ap",MY:"ap",MV:"ap",MH:"ap",FM:"ap",MN:"ap",NR:"ap",NP:"ap",NC:"ap",NZ:"ap",NU:"ap",NF:"ap",OM:"ap",PK:"ap",PG:"ap",PH:"ap",PN:"ap",QA:"ap",RU:"ap",WS:"ap",SA:"ap",SG:"ap",SB:"ap",LK:"ap",TW:"ap",TJ:"ap",TH:"ap",TK:"ap",TO:"ap",TR:"ap",TM:"ap",TV:"ap",AE:"ap",UZ:"ap",VU:"ap",VN:"ap",WF:"ap",YE:"ap"},hashStr:function(e){var t,i,a,n=0;if(0===e.length)return n;for(t=0,a=e.length;t<a;t++)i=e.charCodeAt(t),n=(n<<5)-n+i,n|=0;return n},createFileSizeString:function(e){var t="";return t=e>=1099511627776?(e/1099511627776).toFixed(1).toString()+iaw.i18n.getLocalizedString("filesize_key_TB"):e>=1073741824?(e/1073741824).toFixed(1).toString()+iaw.i18n.getLocalizedString("filesize_key_GB"):e>=1048576?(e/1048576).toFixed(1).toString()+iaw.i18n.getLocalizedString("filesize_key_MB"):e>=1024?(e/1024).toFixed(1).toString()+iaw.i18n.getLocalizedString("filesize_key_KB"):e>0?e.toString()+iaw.i18n.getLocalizedString("filesize_key_B"):"--",t.replace(".",iaw.i18n.getLocalizedString("filesize_key_decimal"))},showLicenseDialog:function(e,t,i,a,n,s){var o="com.adobe.inapp.purchase.init",r="com.adobe.inapp.purchase.perform",c="com.adobe.inapp.purchase.closed",l="com.adobe.inapp.purchase";return new Promise(function(d,u){function p(c){f.removeEventListener(o,p);var l=new CSEvent(r,"APPLICATION","CCInAppCmdN",f.getExtensionID());l.data={elementType:e.type,contentId:String(t),skipQuotaCheck:i,licenseType:s,addToLibraryID:a,renditionDetails:n},f.dispatchEvent(l),iaw.log.logJSON("Dispatch CEP event to start purchase dialog: ",l)}function g(e){if(iaw.log.logJSON("Data from purchase dialog: ",e),f.removeEventListener(c,g),f.removeEventListener("com.adobe.csxs.events.ExtensionUnloaded",g),"com.adobe.csxs.events.ExtensionUnloaded"===e.type){var t=new DOMParser,i=t.parseFromString(e.data,"text/xml");if(i.getElementsByTagName("Id")[0].childNodes[0].nodeValue!==l||"1"!==i.getElementsByTagName("ClosingType")[0].childNodes[0].nodeValue)return}var a=e.data;a&&a.didFinish?d(a.data):u(a&&a.data)}var f=iaw.cepUtil.csInterface;return f?(f.addEventListener(o,p),f.addEventListener(c,g),f.addEventListener("com.adobe.csxs.events.ExtensionUnloaded",g),void f.requestOpenExtension(l)):void u()})},loadLibrary:function(e,t){var i=this;e=e||"*";var a=0;return new Promise(function(n,s){function o(){if(++a>100)return void s("Fail to load Library.");var e=ccLibraries&&ccLibraries.getLoadedCollections();return e&&0!==e.length?(i.libraryCollections=e,i.loadingLibrary&&(iaw.perf.measure(iaw.perf.timers.InitLibrary),i.loadingLibrary=!1),void n(e)):void window.setTimeout(o,5*a)}return"undefined"!=typeof ccLibraries||i.loadingLibrary?i.libraryCollections&&!t?void n(i.libraryCollections):void o():(iaw.perf.set(iaw.perf.timers.LoadLibraryFile),i.loadingLibrary=!0,void iaw.util.loadExternalScript("./js/cc-libraries-api.min.js").then(function(t){if(iaw.perf.measure(iaw.perf.timers.LoadLibraryFile),iaw.perf.set(iaw.perf.timers.InitLibrary),"undefined"!=typeof ccLibraries){iaw.libraryManager.isProcessRunning()||iaw.libraryManager.launchCCLibraryProcess();var i={log:function(e){iaw.log.console(e)}},a={SHARED_LOCAL_STORAGE:!0,ELEMENT_TYPE_FILTERS:e};ccLibraries.configure(i,a),ccLibraries.addLoadedCollectionsListener(o)}else s("Fail to load Library javascript file.")}))})},getPipMethodString:function(e,t){var i=iaw.cepUtil.csInterface.getExtensionID().replace("com.adobe.","")+" "+e;return t&&(i+=" "+t),i},assign:function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var a=arguments[i];if(void 0!==a&&null!==a)for(var n in a)a.hasOwnProperty(n)&&void 0!==a[n]&&(t[n]=a[n])}return t},getTemplateData:function(e){var t,i=iaw.store.get("templates");return i&&i.length>0&&i.forEach(function(i){i.id===e&&(t=i)}),t},setTemplateData:function(e,t){var i=iaw.store.get(["templateLUT",e]);iaw.store.set(["templates",i],t)},smoothScroll:function(e,t,i,a){function n(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)}function s(){c+=l,o=n(c,r,t,i),e.scrollTop=o,c<i?requestAnimationFrame(s):"function"==typeof a&&a()}var o,r=e.scrollTop,c=0,l=20;i="undefined"==typeof i?500:i,s()}},function(){var e={query:null,mruCallbackPending:!1,handleStatusChange:function(e){var t=null;if("PHXS"===e.appId){e.data=e.data.replace(/'/g,'"');var i=e.data.match(/^ver1,/)?JSON.parse(e.data.replace(/^ver1,/,"")):null;if(i&&i.eventID&&i.eventData)return void(1936028772===i.eventID&&i.eventData.to&&i.eventData.to._obj&&"generalPreferences"===i.eventData.to._obj&&"undefined"!=typeof i.eventData.to.useClassicFileNewDialog&&iaw.store.set(["host","fnftEnabled"],!i.eventData.to.useClassicFileNewDialog))}try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(a){iaw.log.exception("Status Change Exception: "+a.message)}switch(t.statusEvent){case"updateShortcutKey":var n=iaw.store.get(["host","buttonInfo",t.statusData.buttonID])||null;n&&(n.shortcut=t.statusData.shortcut.replace(/Cmd\+/,"⌘"),riotctrl.trigger("update-shortcut-key"));break;case"updateMRUList":var s=iaw.store.get(["host","tabs","recentfile"]);if("PHXS"!==e.appId){if(s&&t.statusData){var o=[];try{o=JSON.parse(JSON.stringify(t.statusData),iaw.json.startDataReceiver)}catch(a){iaw.log.exception("MRU JSON exception: "+a.message)}s.list='[""]'!==JSON.stringify(o)?o:[],iaw.start.updateMRUFileSize(s.list),riotctrl.trigger("update-mru-list")}}else iaw.start.mruCallbackPending||(iaw.start.mruCallbackPending=!0,iaw.cepUtil.evalExtendScript("CCXWelcomeXSHost_PHXS.getRecentFilesJSON()",function(e){try{var t=JSON.parse(e,iaw.json.startDataReceiver);iaw.start.updateMRUFileSize(t.list),s.list=t.list}catch(i){iaw.log.exception("Status Change Exception: "+i.message)}riotctrl.trigger("update-mru-list"),iaw.start.mruCallbackPending=!1}));break;case"updateFNFTPref":var r=t.statusData||!1;"string"==typeof r&&(r="true"===r||"1"===r),iaw.store.set(["host","fnftEnabled"],r);break;case"toggleMediaPlay":riotctrl.trigger(t.statusData?"play-all-media":"pause-all-media")}},updateMRUFileSize:function(e){e&&e.forEach(function(e){e.size=iaw.util.createFileSizeString(e.size)})},getData:function(e){iaw.cepUtil.evalExtendScript("CCXWelcomeXSHost_"+iaw.cepUtil.applicationID+".getUserJSONData()",function(t){e(t)})},getTabData:function(e){return window.alert("DEPRECATED -- REPLACE CALL"),iaw.store.get(["host","tabs",e])||null},updateTabDataOnInit:function(e){if(e.tabs){var t,i=e.tabs.length,a=[];for(t=0;t<i;++t)"presetfile"!==e.tabs[t].type&&"templatefile"!==e.tabs[t].type&&"samplefile"!==e.tabs[t].type&&"recentlib"!==e.tabs[t].type||a.push(t);for(i=a.length,t=0;t<i;++t)e.tabs.splice(a[t],1);for(e.tabs.splice(1,0,{type:"ccfiles",label:"listview_ccfiles_tab_label",listViewEnabled:!0,thumbnailViewEnabled:"AEFT"!==e.hostID&&"PPRO"!==e.hostID&&"MUSE"!==e.hostID&&"DRWV"!==e.hostID,list:[]}),i=e.tabs.length,t=0;t<i;++t){var n=e.tabs[t],s=n.list.length;("recentfile"===n.type&&s&&s>0||!e.defaultTab&&("presetfile"===n.type||"templatefile"===n.type||"samplefile"===n.type))&&(e.defaultTab=n.type);for(var o=0;o<s;o++){var r=n.list[o];r.action||(r.action=n.type)}}}}};window.iaw=window.iaw||{},window.iaw.start=e,window.iaw.data=window.iaw.data||{},window.iaw.data.start=e}(),iaw.mobileAssetEvents={UNKNOWN_ERROR:"mobileAssetsUnknownError",MOBILE_ASSET_CLEAR_STATES:"mobileAssetsClearStates",MOBILE_ASSET_ERROR_STATES:"mobileAssetsErrorStates",MOBILE_ASSET_PAGE_FAILURE:"mobileAssetsPageFailure",MOBILE_ASSET_SYNC_REQUEST:"mobileAssetsSyncRequest",MOBILE_ASSET_SYNC_RESPONSE:"mobileAssetsSyncResponse",MOBILE_ASSET_PROJECTS_REQUEST:"mobileAssetsloadProjects",MOBILE_ASSET_PROJECTS_RESPONSE:"mobileAssetsProjectsLoaded",MOBILE_ASSET_PAGES_REQUEST:"mobileAssetsLoadPages",MOBILE_ASSET_PAGES_RESPONSE:"mobileAssetsPagesLoaded",MOBILE_ASSET_PAGE_REQUEST:"mobileAssetsLoadPage",MOBILE_ASSET_PROJECTS_LOADMORE_REQUEST:"mobileAssetsloadMoreProjects",MOBILE_ASSET_PROJECTS_LOADMORE_RESPONSE:"mobileAssetsMoreProjectsLoaded",MOBILE_ASSET_LOADMORE_PROJECTS_FAILURE:"mobileAssetsLoadMoreFailure"},riotctrl.on("update-mru-list",function(){iaw.store.get(["host","mobileCreationsEnabled"])&&(riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_CLEAR_STATES),iaw.mobileAssetMgr.initiateSync(),iaw.data.mobileAssets.pageView||(iaw.data.mobileAssets.projectList.isDirty=!0,iaw.mobileAssetMgr.statesInSyncing()))}),riotctrl.on(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_REQUEST,function(){iaw.mobileAssetMgr.getProjects()},this),riotctrl.on(iaw.mobileAssetEvents.MOBILE_ASSET_PAGES_REQUEST,function(e){iaw.mobileAssetMgr.getPages(e),iaw.analytics.pip.logEvent(iaw.analytics.pipQuery.category,iaw.analytics.pipQuery.pipSucceedProject.subCategory,iaw.analytics.pipQuery.pipSucceedProject.eventName)},this),riotctrl.on(iaw.mobileAssetEvents.MOBILE_ASSET_PAGE_REQUEST,function(e){iaw.mobileAssetMgr.getPage(e),iaw.analytics.pip.logEvent(iaw.analytics.pipQuery.category,iaw.analytics.pipQuery.pipSucceedProjectFile.subCategory,iaw.analytics.pipQuery.pipSucceedProjectFile.eventName)},this),riotctrl.on(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_LOADMORE_REQUEST,function(){iaw.mobileAssetMgr.getProjectsByIndex()},this),riotctrl.on(iaw.mobileAssetEvents.MOBILE_ASSET_CLEAR_STATES,function(){iaw.mobileAssetMgr.clearAllStates()},this),function(){if(window.__adobe_cep__){var e={whenHostReady:function(){if(iaw.store.get(["host","mobileCreationsEnabled"])){var e=iaw.store.get(["host","accountType"]);""===e&&(e=iaw.cepUtil.getPrimaryAccountType(),iaw.store.set(["host","accountType"],e),iaw.log.console("[mobile-assets] Account type from ccx-start: "+e)),"type1"===e?(iaw.store.set(["host","tabs","mobilecreations"],{label:"listview_mobile_tab_label",list:[],listViewEnabled:!1,thumbnailViewEnabled:!0,type:"mobilecreations"}),iaw.analytics.pip.logEvent(iaw.analytics.pipQuery.category,iaw.analytics.pipQuery.pipAware.subCategory,iaw.analytics.pipQuery.pipAware.eventName),iaw.mobileAssetMgr.initiateSync()):iaw.log.console("[mobile-assets] Tab not added. AccountType: "+e)}}};iaw.startup.add(e)}var t={MOBILE_CREATION_TABOPTION:"mobilecreations",assetProductTag:{draw:"Adobe Illustrator Draw",sketch:"Adobe Photoshop Sketch",proteus:"Adobe Illustrator Proteus",comp:"Adobe Comp CC",cls:"Adobe Mobile App"},syncGroupMap:{adobedraw:"Adobe Illustrator Draw",adobesketch:"Adobe Photoshop Sketch","adobe-layup":"Adobe Comp CC",adobeclsprojects:"Adobe Mobile App"},errorStates:{pageFailure:void 0,projDeleted:void 0,syncError:void 0},tryAgainData:{state:void 0,id:void 0},LOAD_MORE_COUNT:10,INITIAL_PROJECT_COUNT:10,hasMoreProjects:!1,projectsData:[],pagesData:[],pageView:!1,projectList:{isDirty:!1},addHandlers:{sync:!1,getPage:!1,getProjects:!1,getPages:!1},projectResponseReceived:!1,getProjectDataByID:function(e){var t;return this.projectsData.forEach(function(i){JSON.stringify(i.identifierData)===JSON.stringify(e)&&(t=i)}),t},getPageDataByID:function(e){var t;return this.pagesData.forEach(function(i){JSON.stringify(i.identifierData)===JSON.stringify(e)&&(t=i)}),t}},i={requestMgr:{statesData:{guid:void 0,start:!1,complete:!1},states:{sync:{guid:void 0,start:!1,complete:!1,timeOut:!1},getProjects:{guid:void 0,start:!1,complete:!1,timeOut:!1},getProjectsByIndex:{guid:void 0,start:!1,complete:!1,timeOut:!1},getPages:{guid:void 0,start:!1,complete:!1,timeOut:!1},getPage:{guid:void 0,start:!1,complete:!1,timeOut:!1}},timeout:18e4,processTimeout:!1,newGuid:function(e){return e.guid=iaw.util.generateGUID(),e.guid},getGuid:function(e){return e.guid},invalidateGuid:function(e){e.guid=void 0},invalidateState:function(e){e.guid=void 0,e.start=!1,e.complete=!1,e.timeOut=!1},initTimeout:function(e,t){e.timeOut=!0,e.start=!0,this.resetErrorStates(e,t);var i=this;setTimeout(function(){t===i.getGuid(e)&&e.timeOut&&e===iaw.data.mobileAssets.tryAgainData.state&&(i.invalidateState(e),iaw.log.console("[mobile-assets] MobileCreations Timeout"),e===i.states.getProjectsByIndex?riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_LOADMORE_PROJECTS_FAILURE):riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_ERROR_STATES))},this.timeout)},invalidateTimeout:function(e,t){t===this.getGuid(e)&&(e.timeOut=!1)},setTryAgain:function(e,t){this.states.getProjectsByIndex.start=!1,iaw.data.mobileAssets.tryAgainData.state=e,iaw.data.mobileAssets.tryAgainData.id=t},resetErrorStates:function(e,t){this.states.sync===e&&t===this.getGuid(e)?(iaw.data.mobileAssets.errorStates.syncError=!1,iaw.data.mobileAssets.projectList.isDirty=!0,iaw.data.mobileAssets.projectResponseReceived=!1):this.states.getProjects===e&&t===this.getGuid(e)?iaw.data.mobileAssets.projectResponseReceived=!1:this.states.getPage===e&&t===this.getGuid(e)?(iaw.data.mobileAssets.errorStates.pageFailure=!1,iaw.data.mobileAssets.errorStates.projDeleted=!1):this.states.getPages===e&&t===this.getGuid(e)&&(iaw.log.console("[mobile-assets] Resetting getPages"),iaw.data.mobileAssets.errorStates.projDeleted=!1)}},VULCAN_MOBILE_FEED_REQUEST:"ccxprocess.mobiledataRequest",VULCAN_MOBILE_FEED_RESPONSE:"ccxprocess.mobiledataResponse",VULCAN_MOBILE_PROJECT_REQUEST:"ccxprocess.mobileprojectRequest",VULCAN_MOBILE_PROJECT_RESPONSE:"ccxprocess.mobileprojectResponse",VULCAN_MOBILE_PAGE_REQUEST:"ccxprocess.mobilepageRequest",VULCAN_MOBILE_PAGE_RESPONSE:"ccxprocess.mobilepageResponse",VULCAN_SYNC_REQUEST:"ccxprocess.syncrequest",VULCAN_SYNC_RESPONSE:"ccxprocess.syncresponse",clearAllStates:function(){iaw.log.console("[mobile-assets] clearAllStates() called......"),this.requestMgr.invalidateState(this.requestMgr.states.sync),this.requestMgr.invalidateState(this.requestMgr.states.getProjects),this.requestMgr.invalidateState(this.requestMgr.states.getProjectsByIndex),this.requestMgr.invalidateState(this.requestMgr.states.getPages),this.requestMgr.invalidateState(this.requestMgr.states.getPage)},clearPagesAndPageStates:function(){iaw.log.console("[mobile-assets] clearPagesAndPageStates called......"),this.requestMgr.invalidateState(this.requestMgr.states.getPages),this.requestMgr.invalidateState(this.requestMgr.states.getPage)},statesInSyncing:function(){iaw.data.mobileAssets.projectList.isDirty?(iaw.data.mobileAssets.projectsData=[],riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_REQUEST)):(this.clearPagesAndPageStates(),riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_RESPONSE))},initiateSync:function(){if(iaw.data.mobileAssets.addHandlers.sync||(iaw.data.mobileAssets.addHandlers.sync=!0,VulcanInterface.addMessageListener(VulcanMessage.TYPE_PREFIX+this.VULCAN_SYNC_RESPONSE,function(e){var t,i=VulcanInterface.getPayload(e);try{t=JSON.parse(i)}catch(a){return void iaw.log.exception("MobileCreations data parse: "+a.message)}if(t.error&&"SERVICE_UNAVAILABLE_ERROR"===t.error.code)return void iaw.analytics.ingest.logMobileCreationsErrorEvent(t.error.code);if(this.requestMgr.invalidateTimeout(this.requestMgr.states.sync,t.guid),t.guid&&t.guid===this.requestMgr.getGuid(this.requestMgr.states.sync)&&iaw.data.mobileAssets.tryAgainData.state===this.requestMgr.states.sync){if(this.requestMgr.invalidateGuid(this.requestMgr.states.sync),iaw.log.console("[mobile-assets] initiateSync response received for guid: "+t.guid),this.requestMgr.states.sync.complete=!0,this.requestMgr.states.sync.start=!1,t.error){if(iaw.analytics.ingest.logMobileCreationsErrorEvent(t.error.code),"NOT_LOGGED_IN"===t.error.code)return iaw.data.mobileAssets.projectsData=[],void riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_RESPONSE);iaw.data.mobileAssets.errorStates.syncError=!0}this.requestMgr.states.getProjects.start&&!iaw.data.mobileAssets.pageView&&riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_REQUEST)}},this)),!this.requestMgr.states.sync.start||this.requestMgr.states.sync.complete){this.requestMgr.setTryAgain(this.requestMgr.states.sync,void 0);var e=this.requestMgr.newGuid(this.requestMgr.states.sync),t=new VulcanMessage(VulcanMessage.TYPE_PREFIX+this.VULCAN_SYNC_REQUEST);t.setPayload(JSON.stringify({guid:e,count:iaw.data.mobileAssets.INITIAL_PROJECT_COUNT})),iaw.log.console("[mobile-assets] Sending initiateSync request with guid: "+e),VulcanInterface.dispatchMessage(t),this.requestMgr.initTimeout(this.requestMgr.states.sync,e)}},getProjects:function(){if(iaw.data.mobileAssets.addHandlers.getProjects||(iaw.data.mobileAssets.addHandlers.getProjects=!0,VulcanInterface.addMessageListener(VulcanMessage.TYPE_PREFIX+this.VULCAN_MOBILE_FEED_RESPONSE,function(e){var t,i=VulcanInterface.getPayload(e);try{t=JSON.parse(i)}catch(a){return void iaw.log.exception("MobileCreations projects data parse: "+a.message)}if(t.error&&"SERVICE_UNAVAILABLE_ERROR"===t.error.code)return void iaw.analytics.ingest.logMobileCreationsErrorEvent(t.error.code);iaw.data.mobileAssets.tryAgainData.state===this.requestMgr.states.getProjects?this.requestMgr.invalidateTimeout(this.requestMgr.states.getProjects,t.guid):iaw.data.mobileAssets.tryAgainData.state===this.requestMgr.states.getProjectsByIndex&&this.requestMgr.invalidateTimeout(this.requestMgr.states.getProjectsByIndex,t.guid);var n,s,o=[];if(t.guid&&t.guid===this.requestMgr.getGuid(this.requestMgr.states.getProjects)&&iaw.data.mobileAssets.tryAgainData.state===this.requestMgr.states.getProjects){if(this.requestMgr.invalidateGuid(this.requestMgr.states.getProjects),this.requestMgr.states.getProjects.start=!1,this.requestMgr.states.getProjects.complete=!0,iaw.log.console("[mobile-assets] getProjects response received for guid: "+t.guid),window.__adobe_cep__){if(t.error)return iaw.analytics.ingest.logMobileCreationsErrorEvent(t.error.code),"NOT_LOGGED_IN"===t.error.code?(iaw.data.mobileAssets.projectsData=[],void riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_RESPONSE)):(o=[],iaw.data.mobileAssets.projectResponseReceived=!1,"NETWORK_ERROR"===t.error.code&&iaw.log.console("[mobile-assets] Network Error"),void riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_ERROR_STATES));if(o=t.list||[]){var r=0;o.forEach(function(e){e.action=iaw.mobileAssetEvents.MOBILE_ASSET_PAGES_REQUEST,e.index=r++}),iaw.data.mobileAssets.projectsData=o,iaw.data.mobileAssets.projectResponseReceived=!0,iaw.data.mobileAssets.projectList.isDirty=!1}if(void 0!==t.hasMore?iaw.data.mobileAssets.hasMoreProjects=t.hasMore:iaw.data.mobileAssets.hasMoreProjects=!1,iaw.data.mobileAssets.hasMoreProjects===!1&&(n=0,s=iaw.data.mobileAssets.projectsData,s&&s.length>0)){for(r=0;r<s.length;r++)if(s[r]&&!s[r].error){n++;break}0===n&&(iaw.data.mobileAssets.projectsData=[])}iaw.log.console("[mobile-assets] projectresponse: "+iaw.data.mobileAssets.projectResponseReceived),riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_RESPONSE)}}else if(t.guid&&t.guid===this.requestMgr.getGuid(this.requestMgr.states.getProjectsByIndex)&&iaw.data.mobileAssets.tryAgainData.state===this.requestMgr.states.getProjectsByIndex&&(this.requestMgr.invalidateGuid(this.requestMgr.states.getProjectsByIndex),this.requestMgr.states.getProjectsByIndex.start=!1,this.requestMgr.states.getProjectsByIndex.complete=!0,iaw.log.console("[mobile-assets] getProjectsByIndex response received for guid: "+t.guid),window.__adobe_cep__)){if(t.error)return iaw.analytics.ingest.logMobileCreationsErrorEvent(t.error.code),"NOT_LOGGED_IN"===t.error.code?(iaw.data.mobileAssets.projectsData=[],void riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_RESPONSE)):(o=[],"NETWORK_ERROR"===t.error.code&&iaw.log.console("[mobile-assets] Network Error"),void riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_ERROR_STATES));if(o=t.list||[],o&&(o=o.filter(function(e){return!(e&&e.identifierData&&iaw.data.mobileAssets.getProjectDataByID(e.identifierData))}),r=0,o.forEach(function(e){e.action=iaw.mobileAssetEvents.MOBILE_ASSET_PAGES_REQUEST,e.index=r++,iaw.data.mobileAssets.projectsData.push(e)})),void 0!==t.hasMore?iaw.data.mobileAssets.hasMoreProjects=t.hasMore:iaw.data.mobileAssets.hasMoreProjects=!1,iaw.data.mobileAssets.hasMoreProjects===!1&&(n=0,s=iaw.data.mobileAssets.projectsData,s&&s.length>0)){for(r=0;r<s.length;r++)if(s[r]&&!s[r].error){n++;break}0===n&&(iaw.data.mobileAssets.projectsData=[],riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_RESPONSE))}riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_LOADMORE_RESPONSE)}},this)),iaw.data.mobileAssets.pageView=!1,this.requestMgr.states.getProjects.start=!0,this.requestMgr.states.sync.start&&!this.requestMgr.states.sync.complete)return void this.requestMgr.setTryAgain(this.requestMgr.states.sync,void 0);if(!this.requestMgr.states.sync.start&&this.requestMgr.states.sync.complete&&iaw.data.mobileAssets.errorStates.syncError)this.clearAllStates(),this.requestMgr.setTryAgain(this.requestMgr.states.sync,void 0),riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_ERROR_STATES);else if(!this.requestMgr.states.sync.start&&this.requestMgr.states.sync.complete&&!iaw.data.mobileAssets.errorStates.syncError){this.requestMgr.setTryAgain(this.requestMgr.states.getProjects,void 0);var e=this.requestMgr.newGuid(this.requestMgr.states.getProjects),t=new VulcanMessage(VulcanMessage.TYPE_PREFIX+this.VULCAN_MOBILE_FEED_REQUEST);t.setPayload(JSON.stringify({guid:e,startIndex:0,count:iaw.data.mobileAssets.INITIAL_PROJECT_COUNT})),iaw.log.console("[mobile-assets] Sending getProjects request with guid: "+e),VulcanInterface.dispatchMessage(t),this.requestMgr.initTimeout(this.requestMgr.states.getProjects,e)}},getProjectsByIndex:function(){if(this.requestMgr.states.getProjects.start&&!this.requestMgr.states.getProjects.complete)return void this.requestMgr.setTryAgain(this.requestMgr.states.getProjects,void 0);if(!this.requestMgr.states.getProjects.start&&this.requestMgr.states.getProjects.complete&&!iaw.data.mobileAssets.projectResponseReceived)return void this.requestMgr.setTryAgain(this.requestMgr.states.getProjects,void 0);if(!this.requestMgr.states.getProjects.start&&this.requestMgr.states.getProjects.complete&&iaw.data.mobileAssets.projectResponseReceived&&!this.requestMgr.states.getProjectsByIndex.start){iaw.data.mobileAssets.pageView=!1,this.requestMgr.states.getProjectsByIndex.start=!0,this.requestMgr.setTryAgain(this.requestMgr.states.getProjectsByIndex,void 0);var e=this.requestMgr.newGuid(this.requestMgr.states.getProjectsByIndex),t=iaw.data.mobileAssets.projectsData.length,i=new VulcanMessage(VulcanMessage.TYPE_PREFIX+this.VULCAN_MOBILE_FEED_REQUEST);i.setPayload(JSON.stringify({guid:e,startIndex:t,count:iaw.data.mobileAssets.LOAD_MORE_COUNT})),iaw.log.console("[mobile-assets] Sending getProjectsByIndex request for startIndex: "+t+" with guid: "+e),VulcanInterface.dispatchMessage(i),this.requestMgr.initTimeout(this.requestMgr.states.getProjectsByIndex,e)}},getPages:function(e){iaw.data.mobileAssets.addHandlers.getPages||(iaw.data.mobileAssets.addHandlers.getPages=!0,VulcanInterface.addMessageListener(VulcanMessage.TYPE_PREFIX+this.VULCAN_MOBILE_PROJECT_RESPONSE,function(t){this.requestMgr.states.getPages.complete=!0,this.requestMgr.states.getPages.start=!1;var i,a=VulcanInterface.getPayload(t);try{i=JSON.parse(a)}catch(n){return void iaw.log.exception("MobileCreations pages data parse: "+n.message)}if(i.error&&"SERVICE_UNAVAILABLE_ERROR"===i.error.code)return void iaw.analytics.ingest.logMobileCreationsErrorEvent(i.error.code);if(this.requestMgr.invalidateTimeout(this.requestMgr.states.getPages,i.guid),i.guid&&i.guid===this.requestMgr.getGuid(this.requestMgr.states.getPages)&&iaw.data.mobileAssets.tryAgainData.state===this.requestMgr.states.getPages){this.requestMgr.invalidateGuid(this.requestMgr.states.getPages),iaw.log.console("[mobile-assets] getPages response received for project data: "+JSON.stringify(e)+" and for guid: "+i.guid);var s=iaw.data.mobileAssets.getProjectDataByID(i.parentIdentifierData);if(!s)return;if(i.error){if(iaw.analytics.ingest.logMobileCreationsErrorEvent(i.error.code),"NOT_LOGGED_IN"===i.error.code)return iaw.data.mobileAssets.projectsData=[],void riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_RESPONSE);s.isDirty=!0,"PROJECT_DELETED"===i.error.code&&(iaw.data.mobileAssets.errorStates.projDeleted=!0),riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_ERROR_STATES)}else{s.isDirty=!1;var o=i.list;if(window.__adobe_cep__){var r=0;o.forEach(function(e){e.action=iaw.mobileAssetEvents.MOBILE_ASSET_PAGE_REQUEST,e.index=r++}),iaw.data.mobileAssets.pagesData=o,riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PAGES_RESPONSE)}}}},this)),this.requestMgr.setTryAgain(this.requestMgr.states.getPages,e),iaw.data.mobileAssets.pageView=!0;var t=this.requestMgr.newGuid(this.requestMgr.states.getPages),i=new VulcanMessage(VulcanMessage.TYPE_PREFIX+this.VULCAN_MOBILE_PROJECT_REQUEST);i.setPayload(JSON.stringify({id:e,guid:t})),iaw.log.console("[mobile-assets] Sending getPages request with project data "+JSON.stringify(e)+" and guid: "+t),VulcanInterface.dispatchMessage(i),this.requestMgr.initTimeout(this.requestMgr.states.getPages,t)},getPage:function(e){iaw.data.mobileAssets.addHandlers.getPage||(iaw.data.mobileAssets.addHandlers.getPage=!0,VulcanInterface.addMessageListener(VulcanMessage.TYPE_PREFIX+this.VULCAN_MOBILE_PAGE_RESPONSE,function(t){this.requestMgr.states.getPage.start=!1,this.requestMgr.states.getPage.complete=!0;var i,a=VulcanInterface.getPayload(t),n={};try{i=JSON.parse(a)}catch(s){return void iaw.log.exception("MobileCreations page data parse: "+s.message)}if(i.error&&"SERVICE_UNAVAILABLE_ERROR"===i.error.code)return void iaw.analytics.ingest.logMobileCreationsErrorEvent(i.error.code);if(this.requestMgr.invalidateTimeout(this.requestMgr.states.getPage,i.guid),i.guid&&i.guid===this.requestMgr.getGuid(this.requestMgr.states.getPage)&&iaw.data.mobileAssets.tryAgainData.state===this.requestMgr.states.getPage){this.requestMgr.invalidateGuid(this.requestMgr.states.getPage);var o=iaw.data.mobileAssets.getPageDataByID(i.parentIdentifierData);if(iaw.log.console("[mobile-assets] getPages response received for page data: "+JSON.stringify(e)+" and for guid: "+i.guid),o.isDirty=!1,!o)return;if(i.error){if(iaw.analytics.ingest.logMobileCreationsErrorEvent(i.error.code),"NOT_LOGGED_IN"===i.error.code)return iaw.data.mobileAssets.projectsData=[],void riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PROJECTS_RESPONSE);"BLANK_PAGE"===i.error.code?(o.pageFailure=!1,iaw.cepUtil.evalExtendScript("app.documents.add()")):(o.pageFailure=!0,riotctrl.trigger(iaw.mobileAssetEvents.MOBILE_ASSET_PAGES_RESPONSE))}else o.pageFailure=!1,iaw.log.console("[mobile-assets] getPage response opening......"),iaw.analytics.ingest.logMobileCreationsClickedEvent("item",o.identifierData),iaw.cepUtil.evalExtendScript("app.open(new File ('"+i.path+"'))"),n.syncGroup=o.identifierData.syncGroup,n.size=i.size.toString();n&&iaw.analytics.pip.logDataGroupEvent(iaw.analytics.pipQuery.category,{"File Type":iaw.data.mobileAssets.syncGroupMap[n.syncGroup],"File Size in KB":n.size})}},this)),this.requestMgr.setTryAgain(this.requestMgr.states.getPage,e),iaw.data.mobileAssets.pageView=!0;var t=this.requestMgr.newGuid(this.requestMgr.states.getPage),i=new VulcanMessage(VulcanMessage.TYPE_PREFIX+this.VULCAN_MOBILE_PAGE_REQUEST);i.setPayload(JSON.stringify({id:e,guid:t})),iaw.log.console("[mobile-assets] Sending getPage request with project data "+JSON.stringify(e)+" and guid: "+t),VulcanInterface.dispatchMessage(i),this.requestMgr.initTimeout(this.requestMgr.states.getPage,t)}};window.iaw.data=window.iaw.data||{},window.iaw.data.mobileAssets=t,window.iaw.mobileAssetMgr=i}(),function(){var e={data:{},LOG_PREFIX:"PSDK :: ",CCXP_VULCAN_SPECIFIER:"CCXP",VULCAN_PSDK_FEED_REQUEST:"ccxprocess.PSDKFeedRequest",VULCAN_PSDK_FEED_RESPONSE:"ccxprocess.PSDKFeedResponse",PSDK_RESPONSE_TIMEOUT:2e3,PSDKTimeoutHandler:null,generateDefaultData:function(){var e={cards:[],cardControl:[],expirationDTS:"2015-11-01T00:00:00.000+00:00",version:iaw.store.get(["host","radarVersion"])||"0.0.0"};return e},readJSONFile:function(e){var t=null;if(!e)return t;var i=window.cep.fs.readFile(e);if(0===i.err)try{t=JSON.parse(i.data)}catch(a){iaw.log.console(this.LOG_PREFIX+"Failed to read JSON file with path ["+e+"], error="+a),t=null}else 3===i.err?iaw.log.console(this.LOG_PREFIX+"File does not exist ["+e+"]"):iaw.log.console(this.LOG_PREFIX+"Failed to read JSON file with path ["+e+"], error code="+i.err);return t},getData:function(e,t){var i=this,a=new Date,n=function(e,n){e&&iaw.log.console(i.LOG_PREFIX+e);var s=(new Date).getTime()-a.getTime();iaw.log.debug(i.LOG_PREFIX+"It costs "+s+" ms to get response from CCXProcess."),
t(n)},s=iaw.util.generateGUID(),o={};o.handler=function(e){var t,a,r=VulcanInterface.getPayload(e);try{a=JSON.parse(r),iaw.log.debug(i.LOG_PREFIX+"Receiving "+i.VULCAN_PSDK_FEED_RESPONSE+" ["+a.requestId+"], path is "+a.path)}catch(c){return void iaw.log.debug(i.LOG_PREFIX+"Invalid JSON string:"+r)}if(a&&a.requestId===s){clearTimeout(i.PSDKTimeoutHandler);var l=null;a.path?(t=i.readJSONFile(a.path),t&&t.cards&&t.cards.forEach(function(e){if(e.backgroundImageLocalpath){var t=a.path.substring(0,a.path.lastIndexOf("/"));t&&(e.backgroundImageLocalpath=t+"/"+e.backgroundImageLocalpath)}})):l="path is missing, parsedData="+JSON.stringify(a),VulcanInterface.removeMessageListener(VulcanMessage.TYPE_PREFIX+i.VULCAN_PSDK_FEED_RESPONSE,o.handler),n(l,t)}},VulcanInterface.addMessageListener(VulcanMessage.TYPE_PREFIX+i.VULCAN_PSDK_FEED_RESPONSE,o.handler);var r={productCode:e.hostID,productVersion:e.appVersion,productLanguage:e.language,countryCode:e.countryCode,subscriptionStatus:e.accountStatus,ccxVersion:iaw.cepUtil.getExtensionVersion(!0).version,radarSessionGUID:e.radarSessionGUID};"trial"===r.subscriptionStatus&&(r.trialEndDTS=iaw.util.getTrialEndDate(e.secondsLeftInTrial));var c={psdkParams:r,requestId:s,userTrackingEnabled:e.userTrackingEnabled},l=new VulcanMessage(VulcanMessage.TYPE_PREFIX+i.VULCAN_PSDK_FEED_REQUEST);l.setPayload(JSON.stringify(c)),VulcanInterface.dispatchMessage(l),iaw.log.console(i.LOG_PREFIX+"Sending "+i.VULCAN_PSDK_FEED_REQUEST+" ["+s+"]"),i.PSDKTimeoutHandler=setTimeout(function(){VulcanInterface.removeMessageListener(VulcanMessage.TYPE_PREFIX+i.VULCAN_PSDK_FEED_RESPONSE,o.handler),n("It is timeout to get response from CCX Process.")},i.PSDK_RESPONSE_TIMEOUT)}};window.iaw=window.iaw||{},window.iaw.data=window.iaw.data||{},window.iaw.data.psdk=e}(),HostEvents.prototype={constructor:HostEvents,inputCooldownHack:window.performance.now(),isInCooldown:function(){return!(window.performance.now()-this.inputCooldownHack>1200)},setCooldown:function(){this.inputCooldownHack=window.performance.now()},createDocumentFromTemplate:function(e){var t=iaw.store.get(["host","hostID"]);if(window.__adobe_cep__)switch(t){case"PHXS":window.__adobe_cep__.evalScript("CCXWelcomeXSHost_"+t+'.createDocumentFromTemplate("'+e+'")',iaw.util.closeExtOnStatus);break;default:iaw.cepUtil.sendEvent(iaw.cepUtil.events.kExecuteMenuCmd,e)}}},new HostEvents;var kPhotoshopEventSet=1936028772;!function(){function e(e){if(e){var i=iaw.i18n.normalizeLocaleID(e.language);document.getElementsByTagName("html")[0].setAttribute("lang",i),iaw.perf.measure(iaw.perf.timers.HostData),iaw.perf.set(iaw.perf.timers.PSDKData),e.radarSessionGUID=iaw.util.generateGUID(),iaw.psdk.getData(e,function(i){var a=iaw.psdk.data=i||iaw.psdk.generateDefaultData();iaw.perf.measure(iaw.perf.timers.PSDKData),t(e,a)})}}function t(e,t){if(e){iaw.perf.set(iaw.perf.timers.FinalizeData);var i=iaw.cepUtil.getExtensionID(),a="prod";switch(iaw.cepUtil.usingStageAuthentication()?(iaw.cepUtil.setEnvironment("stage"),a="stage",iaw.log.console("Authentication environment to stage")):iaw.log.console("Authentication environment to production"),window.__adobe_cep__&&!iaw.cepUtil.oneTimeHandler&&(iaw.cepUtil.oneTimeHandler=!0,iaw.cepUtil.csInterface.addEventListener(iaw.cepUtil.events.kHostStatusChanged,iaw.start.handleStatusChange)),e.imsToken=null,iaw.cepUtil.getIMSAccessToken(function(t){e.imsToken=t}),e.hostID){case"PHXS":iaw.cepUtil.sendEvent("com.adobe.PhotoshopLoseFocus",null,i),"com.adobe.ccx.open"===i&&iaw.cepUtil.sendEvent("com.adobe.PhotoshopPersistent",null,i),"com.adobe.ccx.start"===i&&(iaw.cepUtil.sendEvent("com.adobe.PhotoshopRegisterEvent",kPhotoshopEventSet.toString(),i),iaw.cepUtil.csInterface.addEventListener("com.adobe.PhotoshopJSONCallback"+i,iaw.start.handleStatusChange));break;case"PPRO":case"AEFT":e.displayMode="welcome"}e.radarVersion=iaw.cepUtil.getExtensionVersion(!0).version,iaw.localstorage.userID=e.adobeGUID,e.debugMenu=e.debugMenu||!1,e.startView="primary",e.displayCount=parseInt(iaw.localstorage.getUserItem("start.displayCount")||0)+1;var n=iaw.localstorage.getUserItem("start.lastSessionGUID")||null;e.launchCount=parseInt(iaw.localstorage.getUserItem("start.launchCount")||0),n!==e.sessionGUID&&e.launchCount++,iaw.localstorage.setUserItem("start.lastSessionGUID",e.sessionGUID),iaw.localstorage.setUserItem("start.launchCount",e.launchCount),iaw.localstorage.setUserItem("start.displayCount",e.displayCount),iaw.start.updateTabDataOnInit(e),e.defaultTab&&"com.adobe.ccx.open"!==i||(e.defaultTab="recentfile"),e.currentTab=e.defaultTab;var s={};e.tabs.forEach(function(e){s[e.type]=e}),delete e.tabs,e.tabs=s,e.ffcEndpoint="https://prod-rel-ffc.oobesaas.adobe.com/adobe-ffc-external/core/v1/passphrase?passPhrase=",e.collabEndpoint="https://cc-collab.adobe.io/links/",e.ccstorageEndpoint="https://cc-api-assets.adobe.io/libraries/",e.subscribeEndpoint="stage"!==a?"https://cc-collab.adobe.io/publinks/":"https://cc-collab-stage.adobe.io/publinks/",e.bookmarksEndpoint="stage"!==a?"https://cc-collab.adobe.io/bookmarks/":"https://cc-collab-stage.adobe.io/bookmarks/",iaw.util.setUIThemeMode(),"trial"===e.accountStatus&&(e.updateTrialInterval=setInterval(function(){e.secondsLeftInTrial-=3600,e.secondsLeftInTrial<=0&&(clearInterval(e.updateTrialInterval),e.secondsLeftInTrial=0,e.updateTrialInterval=null)},36e5)),iaw.i18n.addFromURLFile("goURL"),riotctrl.trigger("update-profile-name-retro",e.displayName),riotctrl.trigger("update-profile-image",e.adobeGUID),iaw.analytics.config("CCXInAppWelcome",e,t,a),iaw.store.set("host",e),iaw.store.set("psdk",t),iaw.startup.run(iaw.startup.PHASES.Host),iaw.a11y.registerKeyEventsInterest(),window.__adobe_cep__&&(iaw.log.logJSON("host.data: ",e),iaw.log.logJSON("psdk.data: ",t)),riotctrl.trigger("update-host-retro"),iaw.i18n.addFromLocalLocaleFile(e.language,function(){window.moment.locale(e.language),iaw.start.updateMRUFileSize(e.tabs.recentfile.list),riotctrl.trigger("update-cards-retro"),riotctrl.trigger("update-i18n-retro"),riotctrl.trigger("unlock-screen"),iaw.startup.run(iaw.startup.PHASES.Done)}),iaw.analytics.ingest.logScreenStateEvent("open"),iaw.motor.start(),iaw.perf.measure(iaw.perf.timers.DataTime),iaw.perf.measure(iaw.perf.timers.FinalizeData),iaw.perf.measure(iaw.perf.timers.LoadTime,window.loadTime),iaw.test&&(iaw.test.runAll(),document.title=iaw.cepUtil.getExtensionID()),iaw.cepUtil.sendEvent(iaw.cepUtil.events.EXTENSIONREADY,null,i),iaw.cepUtil.sendEvent(iaw.cepUtil.events.INTERACTIVEREADY,null)}}iaw.host=iaw.cepUtil.csInterface?iaw.start:iaw.data.debugHost,iaw.psdk=window.__adobe_cep__?iaw.data.psdk:iaw.data.debugPSDK,document.onreadystatechange=function(i){if("interactive"===document.readyState){iaw.perf.set(iaw.perf.timers.DataTime);var a=iaw.cepUtil.applicationID,n=a.toLowerCase();iaw.store=new Baobab({},{immutable:!1,persistent:!1}),iaw.log.console("CEP extension for "+a+" initializing - acquiring host data..."),window.__adobe_cep__?(document.oncontextmenu=function(){return!1},iaw.cepUtil.addThemeChangeListener(),iaw.perf.set(iaw.perf.timers.HostData),iaw.apps[n]?iaw.apps[n].init(e):iaw.start.getData(function(t){if(t){var i=null;try{i=JSON.parse(t,iaw.json.startDataReceiver)}catch(a){iaw.log.exception("Host JSON parse exception: "+a.message)}e(i)}})):iaw.host.getData(function(e){t(e,iaw.data.debugPSDK.data)}),iaw.startup.run(iaw.startup.PHASES.Doc)}}}(),window.addEventListener("dragover",function(e){e=e||window.event,e.preventDefault()},!1),window.addEventListener("drop",function(e){e=e||window.event,e.preventDefault();for(var t=event.dataTransfer.files,i=t?t.length||0:0,a={path:[]},n=iaw.store.get(["host","hostID"]),s=0;s<i;s++){var o=t[s.toString()].path;o="PHXS"!==n?o:o.replace(/\\/g,"/"),a.path.push(o)}switch(a=JSON.stringify(a),n){case"PHXS":var r=iaw.util.getPipMethodString("drag.drop");iaw.cepUtil.evalExtendScriptWithParams("CCXWelcomeXSHost_PHXS.openDroppedDocument",a,r,iaw.util.closeExtOnStatus);break;default:iaw.cepUtil.sendEvent(iaw.cepUtil.events.kOpenDropFiles,a)}},!1),iaw.apps=iaw.apps||{},iaw.apps.phxs={init:function(e,t){iaw.cepUtil.evalExtendScript('CCXWelcomeXSHost_PHXS.getInitJSON("'+t+'")',function(i){if(i){var a=null;try{var n=iaw.apps.phxs.buildHostJSON(t,i);a=JSON.parse(n,iaw.json.fnftDataReceiver)}catch(s){iaw.log.exception("Host JSON parse error: "+s.message)}e(a),iaw.localstorage.setUserItem("fnft.presetMode",!1)}})},initPresets:function(e,t){var i=iaw.cepUtil.applicationID;iaw.cepUtil.evalExtendScript("CCXWelcomeXSHost_"+i+'.getPresetJSON("'+t+'")',function(i){if(i){var a;try{var n=iaw.apps.phxs.buildHostPresetJSON(t,i);a=JSON.parse(n,iaw.json.fnftDataReceiver)}catch(s){iaw.log.exception("Host JSON parse error: "+s.message)}e(a)}})},buildHostJSON:function(e,t){var i=JSON.parse(t),a=i.envInfo,n={hostID:"PHXS",appVersion:a.appVersion,platform:a.platform,displayMode:a.displayMode,sessionGUID:a.sessionGUID,userTrackingEnabled:a.userTrackingEnabled,language:a.locale,countryCode:a.countryCode,adobeGUID:a.userGUID,accountStatus:a.subscription,accountType:a.accountType};return e&&"fnft"===e?(n.fnftSettings=this.getFNFTData(i),n.displayMode=e,iaw.store.set("phxsFNFTConfigInfo",i.fnftConfigInfo),iaw.store.set("presets",[])):(n.firstName=a.firstName,n.lastName=a.lastName,n.tabs=this.getFileTabs(i),n.appStartClockTime=a.appStartClockTime,n.secondsLeftInTrial=a.secondsLeftInTrial,n.dontShowAgain=a.startDSA,n.buttonInfo=a.buttonInfo,n.fnftEnabled=a.fnftEnabled),JSON.stringify(n)},buildHostPresetJSON:function(e,t){var i=[];if(e&&"fnft"===e){var a=JSON.parse(t);a.fnftConfigInfo=iaw.store.get("phxsFNFTConfigInfo"),i=this.getPresetArray(a)}return JSON.stringify(i)},getFNFTData:function(e){var t,i=e.fnftConfigInfo,a=e.envInfo;t=e.pixelScaleFactorList&&e.pixelScaleFactorList.pixelScaleFactorList&&e.pixelScaleFactorList.pixelScaleFactorList.map(function(e,t){return{label:e.name+(0===t?"":" ("+iaw.util.roundDecimal(e.value,2)+")"),value:e.value}})||[];var n={docSizeBounds:[3e5,3e5],units:["pixelsUnit","inchesUnit","centimetersUnit","millimetersUnit","pointsUnit","picasUnit"],resolutionUnits:["inchesUnit","centimetersUnit"],colorModes:[{mode:"bitmap",values:[1]},{mode:"grayscale",values:[8,16,32]},{mode:"RGB",values:[8,16,32]},{mode:"CMYK",values:[8,16]},{mode:"Lab",values:[8,16]}],backgroundValues:["white","black","background","transparent","custom"],backgroundColor:i.backgroundColor,pointsPerInch:i.pointsPerInch,defaultDocumentName:i.defaultNewDocName||null,colorProfileLists:a.colorProfileLists,colorSettings:i.colorSettings||{},defaultPresetSettings:i.startingPreset||null,pixelAspectRatios:t};return n},getFileTabs:function(e){var t=[],i={type:"recentfile",label:"listview_recentfiles_tab_label",listViewEnabled:"true",thumbnailViewEnabled:"true",list:e.recentFiles.list};return t.push(i),t},getPresetArray:function(e){var t=[],i=this.getRecentlyUsedPresets(e),a=e.mruTemplates.recentlyUsedTemplates;if(a){for(var n=0;n<a.length;++n)a[n].template_category="needslookup";i=i.concat(a)}i.sort(function(e,t){return e.lastUsedTime>t.lastUsedTime?-1:e.lastUsedTime<t.lastUsedTime?1:0}),t=t.concat(i);var s=e.presets;if(s.sections)for(var o=[{category:"recent",sections:["clipboard"]},{category:"saved",sections:["user"]},{category:"photo",sections:["default","photo"]},{category:"print",sections:["uspaper","europaper"]},{category:"mobile",sections:["mobile","iconography"]},{category:"film",sections:["video"]},{category:"web",sections:["web"]},{category:"art",sections:["artillustration"]}],r=0;r<o.length;++r)for(var c=0;c<o[r].sections.length;++c)for(var l=o[r].sections[c],d=0;d<s.sections.length;++d)s.sections[d].section===l&&s.sections[d].presets&&this.addPsPresetListToCCXPresetEntryList(s.sections[d].presets,o[r].category,e.fnftConfigInfo,t);return t},getRecentlyUsedPresets:function(e){var t=[];return e.mruPresets.mru&&this.addPsPresetListToCCXPresetEntryList(e.mruPresets.mru,"recent",e.fnftConfigInfo,t),t},thumbnailForPreset:function(e,t){switch(e){case"photo":return"SP_PresetPhotoDoc.png";case"europaper":case"uspaper":return"SP_PrintDoc.png";case"mobile":return"SP_PresetMobilePhoneDoc.png";case"iconography":return"SP_PresetIconographyDoc.png";case"video":return"SP_PresetFilmVideo.png";case"web":return"SP_PresetWebDoc.png";case"artillustration":return"SP_PresetArt.png";case"clipboard":return"SP_PresetClipboard.png";case"default":return"CCX_Start_DefaultThumb_Ps_Ai_Id.png";case"last":}return"SP_PresetCustom.png"},convertPsPresetToCCXPresetEntry:function(e,t,i){if("separator"!==e.name){var a=e;return a.isPreset=!0,a.id="",a.title=a.name,a.thumbnail_url="",a.mime_type="image/photoshop",a.price_prompt="",a.template_category="error",a.previews=[],"screen"===a.resolution?(a.resolution=i.screenPresetResolution.value,a.resolutionUnits=i.screenPresetResolution.units):"print"===a.resolution&&(a.resolution=i.printPresetResolution.value,a.resolutionUnits=i.printPresetResolution.units),a.template_category=t,a.thumbnail_url=this.thumbnailForPreset(a.group,a.title),a}},addPsPresetListToCCXPresetEntryList:function(e,t,i,a){for(var n=0;n<e.length;++n)if("separator"!==e[n].name){var s=this.convertPsPresetToCCXPresetEntry(e[n],t,i);s&&("clipboard"!==s.group?a.push(s):a.unshift(s))}},promptForCustomColor:function(e){var t,i,a=e,n=iaw.i18n.getLocalizedString("newdoc_color-picker_context");return e instanceof Object||(a={red:255,grain:255,blue:255,type:"RGBColor"}),t=JSON.stringify(a).replace(/"/g,'\\"'),i='"'+t+'", "'+n+'"',new Promise(function(e,t){try{iaw.cepUtil.evalExtendScript("CCXWelcomeXSHost_PHXS.openColorPicker("+i+")",function(i){if(i)try{var a=JSON.parse(i);e(a)}catch(n){t(new Error("Failed to parse result from openColorPicker",n))}e(null)})}catch(a){t(new Error("Failed to get color via color picker",a))}})},convertColorToRGB:function(e){if(!e)return new Promise(function(e,t){e({red:255,grain:255,blue:255,type:"RGBColor"})});var t=JSON.stringify(e).replace(/"/g,'\\"');return new Promise(function(e,i){try{iaw.cepUtil.evalExtendScript('CCXWelcomeXSHost_PHXS.convertColorToRGB("'+t+'")',function(t){if(t)try{var a=JSON.parse(t);e(a)}catch(n){i(new Error("Failed to parse result from convertColorToRGB",n))}i(new Error("convertColorToRGB Failed to convert color, empty result"))})}catch(a){i(new Error("convertColorToRGB Failed to convert color",a))}})},rgbFormat:function(e){return"rgb("+Math.round(e.red)+", "+Math.round(void 0!==e.grain?e.grain:e.green)+", "+Math.round(e.blue)+")"}};